/*
 (c) 2013-2016 angular-cache project authors
 @license MIT <https://github.com/jmdobry/angular-cache/blob/master/LICENSE>
 @overview angular-cache is a very useful replacement for Angular's $cacheFactory.
*/
(function(a,c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c("undefined"===typeof angular?require("angular"):angular):"function"===typeof define&&define.amd?define("angular-cache",["angular"],c):a.angularCacheModuleName=c(a.angular)})(this,function(a){function c(a,b){a||(a=function(a){return a});b||(b=function(a,b){return a===b});if("function"!==typeof a)throw Error('BinaryHeap([weightFunc][, compareFunc]): "weightFunc" must be a function!');if("function"!==typeof b)throw Error('BinaryHeap([weightFunc][, compareFunc]): "compareFunc" must be a function!');
this.weightFunc=a;this.compareFunc=b;this.heap=[]}function b(a){var b=[],c=void 0;if(!p.isObject(a))return b;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b}function g(a){return a&&"function"===typeof a.then}function h(a){return p.isNumber(a)?a.toString():a}function m(a){var b={},c=void 0;if(!p.isObject(a))return b;for(c in a)a.hasOwnProperty(c)&&(b[c]=c);return b}function f(a,d){if(a in r)throw Error(a+" already exists!");if(!p.isString(a))throw Error("cacheId must be a string!");var k={},l={},
f=null,q=new c(function(a){return a.expires},p.equals),t=new c(function(a){return a.accessed},p.equals);a=r[a]={$$id:a,destroy:function(){clearInterval(this.$$cacheFlushIntervalId);clearInterval(this.$$recycleFreqId);this.removeAll();f&&(f().removeItem(this.$$prefix+".keys"),f().removeItem(this.$$prefix));this.$$prefix=q=t=k=f=null;delete r[this.$$id]},disable:function(){this.$$disabled=!0},enable:function(){delete this.$$disabled},get:function(a,b){var c=this;if(Array.isArray(a)){var d=function(){var d=
[];a.forEach(function(a){a=c.get(a,b);null!==a&&void 0!==a&&d.push(a)});return{v:d}}();if("object"===("undefined"===typeof d?"undefined":e.typeof(d)))return d.v}else if(a=h(a),this.$$disabled)return;b=b||{};if(p.isString(a)){if(b&&!p.isObject(b))throw Error("options must be an object!");if(b.onExpire&&!p.isFunction(b.onExpire))throw Error("options.onExpire must be a function!");}else throw Error("key must be a string!");d=void 0;if(f){if(l[a])return l[a];if(d=f().getItem(this.$$prefix+".data."+a))d=
p.fromJson(d);else return}else if(p.isObject(k)){if(!(a in k))return;d=k[a]}var v=d.value,z=(new Date).getTime();f?(t.remove({key:a,accessed:d.accessed}),d.accessed=z,t.push({key:a,accessed:z})):(t.remove(d),d.accessed=z,t.push(d));"passive"===this.$$deleteOnExpire&&"expires"in d&&d.expires<z?(this.remove(a),this.$$onExpire?this.$$onExpire(a,d.value,b.onExpire):b.onExpire&&b.onExpire.call(this,a,d.value),v=void 0):f&&f().setItem(this.$$prefix+".data."+a,JSON.stringify(d));return v},info:function(a){if(a)if(f){if(a=
f().getItem(this.$$prefix+".data."+a))return a=p.fromJson(a),{created:a.created,accessed:a.accessed,expires:a.expires,isExpired:(new Date).getTime()-a.created>(a.maxAge||this.$$maxAge)}}else{if(p.isObject(k)&&a in k)return a=k[a],{created:a.created,accessed:a.accessed,expires:a.expires,isExpired:(new Date).getTime()-a.created>(a.maxAge||this.$$maxAge)}}else return{id:this.$$id,capacity:this.$$capacity,maxAge:this.$$maxAge,deleteOnExpire:this.$$deleteOnExpire,onExpire:this.$$onExpire,cacheFlushInterval:this.$$cacheFlushInterval,
recycleFreq:this.$$recycleFreq,storageMode:this.$$storageMode,storageImpl:f?f():void 0,disabled:!!this.$$disabled,size:t&&t.size()||0}},keys:function(){if(f){var a=f().getItem(this.$$prefix+".keys");return a?p.fromJson(a):[]}return b(k)},keySet:function(){if(f){var a=f().getItem(this.$$prefix+".keys"),b={};if(a){a=p.fromJson(a);for(var c=0;c<a.length;c++)b[a[c]]=a[c]}return b}return m(k)},put:function(a,b,c){var d=this;c||(c={});var e="storeOnResolve"in c?!!c.storeOnResolve:this.$$storeOnResolve,
v="storeOnReject"in c?!!c.storeOnReject:this.$$storeOnReject,z=function(b,c){return function(e){b&&(delete l[a],p.isObject(e)&&"status"in e&&"data"in e&&(e=[e.status,e.data,e.headers(),e.statusText]),d.put(a,e));if(c){if(p.Promise)return p.Promise.reject(e);throw e;}return e}};if(!this.$$disabled&&p.isObject(k)&&null!==b&&void 0!==b){a=h(a);if(!p.isString(a))throw Error("key must be a string!");var C=(new Date).getTime();e={key:a,value:g(b)?b.then(z(e,!1),z(v,!0)):b,created:void 0===c.created?C:c.created,
accessed:void 0===c.accessed?C:c.accessed};c.maxAge&&(e.maxAge=c.maxAge);e.expires=void 0===c.expires?e.created+(e.maxAge||this.$$maxAge):c.expires;if(f){if(g(e.value))return l[a]=e.value,l[a];c=(c=f().getItem(this.$$prefix+".keys"))?p.fromJson(c):[];f().getItem(this.$$prefix+".data."+a)&&this.remove(a);q.push({key:a,expires:e.expires});t.push({key:a,accessed:e.accessed});f().setItem(this.$$prefix+".data."+a,JSON.stringify(e));e=!1;for(v=0;v<c.length;v++)if(c[v]===a){e=!0;break}e||c.push(a);f().setItem(this.$$prefix+
".keys",JSON.stringify(c))}else k[a]&&this.remove(a),q.push(e),t.push(e),k[a]=e,delete l[a];t.size()>this.$$capacity&&this.remove(t.peek().key);return b}},remove:function(a){a+="";delete l[a];if(f){var b=f().getItem(this.$$prefix+".data."+a);if(b){b=p.fromJson(b);t.remove({key:a,accessed:b.accessed});q.remove({key:a,expires:b.expires});f().removeItem(this.$$prefix+".data."+a);var c=f().getItem(this.$$prefix+".keys");c=c?p.fromJson(c):[];a=c.indexOf(a);0<=a&&c.splice(a,1);f().setItem(this.$$prefix+
".keys",JSON.stringify(c));return b.value}}else if(p.isObject(k))return b=k[a]?k[a].value:void 0,t.remove(k[a]),q.remove(k[a]),k[a]=null,delete k[a],b},removeAll:function(){if(f){t.removeAll();q.removeAll();var a=f().getItem(this.$$prefix+".keys");if(a){a=p.fromJson(a);for(var b=0;b<a.length;b++)this.remove(a[b])}f().setItem(this.$$prefix+".keys",JSON.stringify([]))}else{if(p.isObject(k))for(a in t.removeAll(),q.removeAll(),k)k[a]=null;else t.removeAll(),q.removeAll();k={}}l={}},removeExpired:function(){for(var a=
(new Date).getTime(),b={},c=void 0,e=void 0;(e=q.peek())&&e.expires<=a;)b[e.key]=e.value?e.value:null,q.pop();if(f)for(c in b){if(a=f().getItem(this.$$prefix+".data."+c))b[c]=p.fromJson(a).value,this.remove(c)}else for(c in b)this.remove(c);if(this.$$onExpire)for(c in b)this.$$onExpire(c,b[c]);return b},setCacheFlushInterval:function(a){var b=this;if(null===a)delete b.$$cacheFlushInterval;else if(p.isNumber(a)){if(0>a)throw Error("cacheFlushInterval must be greater than zero!");a!==b.$$cacheFlushInterval&&
(b.$$cacheFlushInterval=a,clearInterval(b.$$cacheFlushIntervalId),b.$$cacheFlushIntervalId=setInterval(function(){b.removeAll()},b.$$cacheFlushInterval))}else throw Error("cacheFlushInterval must be a number!");},setCapacity:function(a){if(null===a)delete this.$$capacity;else if(p.isNumber(a)){if(0>a)throw Error("capacity must be greater than zero!");this.$$capacity=a}else throw Error("capacity must be a number!");for(a={};t.size()>this.$$capacity;)a[t.peek().key]=this.remove(t.peek().key);return a},
setDeleteOnExpire:function(a,b){if(null===a)delete this.$$deleteOnExpire;else if(p.isString(a)){if("none"!==a&&"passive"!==a&&"aggressive"!==a)throw Error('deleteOnExpire must be "none", "passive" or "aggressive"!');this.$$deleteOnExpire=a}else throw Error("deleteOnExpire must be a string!");!1!==b&&this.setRecycleFreq(this.$$recycleFreq)},setMaxAge:function(a){if(null===a)this.$$maxAge=Number.MAX_VALUE;else if(p.isNumber(a)){if(0>a)throw Error("maxAge must be greater than zero!");this.$$maxAge=a}else throw Error("maxAge must be a number!");
q.removeAll();if(f){var c=(a=f().getItem(this.$$prefix+".keys"))?p.fromJson(a):[];for(a=0;a<c.length;a++){var e=c[a];var d=f().getItem(this.$$prefix+".data."+e);d&&(d=p.fromJson(d),d.expires=this.$$maxAge===Number.MAX_VALUE?Number.MAX_VALUE:d.created+(d.maxAge||this.$$maxAge),q.push({key:e,expires:d.expires}))}}else for(c=b(k),a=0;a<c.length;a++)e=c[a],k[e].expires=this.$$maxAge===Number.MAX_VALUE?Number.MAX_VALUE:k[e].created+(k[e].maxAge||this.$$maxAge),q.push(k[e]);return"aggressive"===this.$$deleteOnExpire?
this.removeExpired():{}},setOnExpire:function(a){if(null===a)delete this.$$onExpire;else if(p.isFunction(a))this.$$onExpire=a;else throw Error("onExpire must be a function!");},setOptions:function(a,b){a=a||{};b=!!b;if(!p.isObject(a))throw Error("cacheOptions must be an object!");"storagePrefix"in a?this.$$storagePrefix=a.storagePrefix:b&&(this.$$storagePrefix=n.storagePrefix);this.$$prefix=this.$$storagePrefix+this.$$id;"disabled"in a?this.$$disabled=!!a.disabled:b&&(this.$$disabled=n.disabled);
"deleteOnExpire"in a?this.setDeleteOnExpire(a.deleteOnExpire,!1):b&&this.setDeleteOnExpire(n.deleteOnExpire,!1);"recycleFreq"in a?this.setRecycleFreq(a.recycleFreq):b&&this.setRecycleFreq(n.recycleFreq);"maxAge"in a?this.setMaxAge(a.maxAge):b&&this.setMaxAge(n.maxAge);"storeOnResolve"in a?this.$$storeOnResolve=!!a.storeOnResolve:b&&(this.$$storeOnResolve=n.storeOnResolve);"storeOnReject"in a?this.$$storeOnReject=!!a.storeOnReject:b&&(this.$$storeOnReject=n.storeOnReject);"capacity"in a?this.setCapacity(a.capacity):
b&&this.setCapacity(n.capacity);"cacheFlushInterval"in a?this.setCacheFlushInterval(a.cacheFlushInterval):b&&this.setCacheFlushInterval(n.cacheFlushInterval);"onExpire"in a?this.setOnExpire(a.onExpire):b&&this.setOnExpire(n.onExpire);"storageMode"in a||"storageImpl"in a?this.setStorageMode(a.storageMode||n.storageMode,a.storageImpl||n.storageImpl):b&&this.setStorageMode(n.storageMode,n.storageImpl)},setRecycleFreq:function(a){if(null===a)delete this.$$recycleFreq;else if(p.isNumber(a)){if(0>a)throw Error("recycleFreq must be greater than zero!");
this.$$recycleFreq=a}else throw Error("recycleFreq must be a number!");clearInterval(this.$$recycleFreqId);"aggressive"===this.$$deleteOnExpire?function(a){a.$$recycleFreqId=setInterval(function(){a.removeExpired()},a.$$recycleFreq)}(this):delete this.$$recycleFreqId},setStorageMode:function(a,b){function c(a,b){var c=this.keys(),e=c.length;if(e){for(var d,k=p.isObject(b),f=0;f<e;f++){d=c[f];if(a){var h=a().getItem(this.$$prefix+".data."+d);h&&(v[d]=p.fromJson(h))}else k&&(v[d]=b[d]);this.remove(d)}l=
!0}}if(!p.isString(a))throw Error("storageMode must be a string!");if("memory"!==a&&"localStorage"!==a&&"sessionStorage"!==a)throw Error('storageMode must be "memory", "localStorage" or "sessionStorage"!');var e=f,d=k,l=!1,v={};this.$$initializing||c.call(this,e,d);this.$$storageMode=a;if(b){if(p.isObject(b))if("setItem"in b&&"function"===typeof b.setItem){if(!("getItem"in b)||"function"!==typeof b.getItem)throw Error('storageImpl must implement "getItem(key)"!');if(!("removeItem"in b)||"function"!==
typeof b.removeItem)throw Error('storageImpl must implement "removeItem(key)"!');}else throw Error('storageImpl must implement "setItem(key, value)"!');else throw Error("storageImpl must be an object!");f=function(){return b}}else if("localStorage"===this.$$storageMode)try{localStorage.setItem("cachefactory","cachefactory"),localStorage.removeItem("cachefactory"),f=function(){return localStorage}}catch(G){f=null,this.$$storageMode="memory"}else if("sessionStorage"===this.$$storageMode)try{sessionStorage.setItem("cachefactory",
"cachefactory"),sessionStorage.removeItem("cachefactory"),f=function(){return sessionStorage}}catch(G){f=null,this.$$storageMode="memory"}else f=null,this.$$storageMode="memory";this.$$initializing&&c.call(this,f,k);if(l){a=void 0;for(var h in v)a=v[h],this.put(h,a.value,{created:a.created,accessed:a.accessed,expires:a.expires})}},touch:function(a,b){var c=this;if(a){var e=this.get(a,{onExpire:function(a,b){return c.put(a,b)}});e&&this.put(a,e,b)}else for(a=this.keys(),e=0;e<a.length;e++)this.touch(a[e],
b)},values:function(){for(var a=this.keys(),b=[],c=0;c<a.length;c++)b.push(this.get(a[c]));return b}};a.$$initializing=!0;a.setOptions(d,!0);a.$$initializing=!1;return a}function d(a,b){return f(a,b)}a="default"in a?a["default"]:a;var e={};e.typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};var l=function(a,b,c){for(var e=a[c],d=b(e);0<c;){var k=Math.floor((c+
1)/2)-1,f=a[k];if(d>=b(f))break;else a[k]=e,a[c]=f,c=k}},k=function(a,b,c){for(var e=a.length,d=a[c],k=b(d);;){var f=2*(c+1),l=f-1,v=null;l<e&&b(a[l])<k&&(v=l);f<e&&b(a[f])<(null===v?k:b(a[l]))&&(v=f);if(null===v)break;else a[c]=a[v],a[v]=d,c=v}},q=c.prototype;q.push=function(a){this.heap.push(a);l(this.heap,this.weightFunc,this.heap.length-1)};q.peek=function(){return this.heap[0]};q.pop=function(){var a=this.heap[0],b=this.heap.pop();0<this.heap.length&&(this.heap[0]=b,k(this.heap,this.weightFunc,
0));return a};q.remove=function(a){for(var b=this.heap.length,c=0;c<b;c++)if(this.compareFunc(this.heap[c],a)){a=this.heap[c];var e=this.heap.pop();c!==b-1&&(this.heap[c]=e,l(this.heap,this.weightFunc,c),k(this.heap,this.weightFunc,c));return a}return null};q.removeAll=function(){this.heap=[]};q.size=function(){return this.heap.length};q=null;try{q=window.Promise}catch(x){}var p={isNumber:function(a){return"number"===typeof a},isString:function(a){return"string"===typeof a},isObject:function(a){return null!==
a&&"object"===("undefined"===typeof a?"undefined":e.typeof(a))},isFunction:function(a){return"function"===typeof a},fromJson:function(a){return JSON.parse(a)},equals:function(a,b){return a===b},Promise:q},n={capacity:Number.MAX_VALUE,maxAge:Number.MAX_VALUE,deleteOnExpire:"none",onExpire:null,cacheFlushInterval:null,recycleFreq:1E3,storageMode:"memory",storageImpl:null,disabled:!1,storagePrefix:"cachefactory.caches.",storeOnResolve:!1,storeOnReject:!1},r={};d.createCache=f;d.defaults=n;d.info=function(){var a=
b(r),c={size:a.length,caches:{}},e;for(e in n)n.hasOwnProperty(e)&&(c[e]=n[e]);for(e=0;e<a.length;e++){var d=a[e];c.caches[d]=r[d].info()}return c};d.get=function(a){return r[a]};d.keySet=function(){return m(r)};d.keys=function(){return b(r)};d.destroy=function(a){r[a]&&(r[a].destroy(),delete r[a])};d.destroyAll=function(){for(var a in r)r[a].destroy();r={}};d.clearAll=function(){for(var a in r)r[a].removeAll()};d.removeExpiredFromAll=function(){var a={},b;for(b in r)a[b]=r[b].removeExpired();return a};
d.enableAll=function(){for(var a in r)r[a].$$disabled=!1};d.disableAll=function(){for(var a in r)r[a].$$disabled=!0};d.touchAll=function(){for(var a in r)r[a].touch()};d.utils=p;d.BinaryHeap=c;d.utils.equals=a.equals;d.utils.isObject=a.isObject;d.utils.fromJson=a.fromJson;a.module("angular-cache",[]).provider("BinaryHeap",function(){this.$get=function(){return d.BinaryHeap}}).provider("CacheFactory",function(){this.defaults=d.defaults;this.defaults.storagePrefix="angular-cache.caches.";this.$get=
["$q",function(a){d.utils.Promise=a;return d}]});return"angular-cache"});angular.module("fmmp.external.angular-debounce",[]).factory("$debounce",["$timeout",function(a){return function(c,b){function g(){l=c.apply(e||this,d||[]);e=d=null}function h(){k&&(a.cancel(k),k=null)}function m(){e=this;d=arguments;h();k=a(g,b)}function f(){var a=!!e;a&&(h(),g());return a}var d,e,l,k;m.flush=function(){f()||k||g();return l};m.flushPending=function(){f();return l};m.cancel=h;return m}}]);"use strict";
angular.module("ui.autocomplete",[]).directive("uiAutocomplete",["$timeout","$exceptionHandler",function(a,c){function b(a,b){var c=new RegExp($.ui.autocomplete.escapeRegex(b),"i");return $.grep(a,function(a){return c.test($("\x3cdiv\x3e").html(a.label||a.value||a).text())})}var g=$.ui.autocomplete.prototype,h=g._initSource,m=Array.prototype.slice;$.extend(g,{_initSource:function(){this.options.html&&$.isArray(this.options.source)?this.source=function(a,c){c(b(this.options.source,a.term))}:h.call(this)},
_normalize:function(a){return $.map(a,function(a){return a&&"object"===typeof a?$.extend({label:a.label||a.value,value:a.value||a.label},a):{label:a+"",value:a}})},_renderItemData:function(a,b){var c=b.groupLabel||b.label;if(b.groupLabel)c=$("\x3cdiv\x3e").append(c).addClass("ui-menu-group");else if(this.options.html){if("object"===typeof c&&(c=$(c)),"object"!==typeof c||1<c.length||!c.is("a"))c=$("\x3ca\x3e").append(c)}else c=$("\x3ca\x3e").text(c);return $("\x3cli\x3e").append(c).appendTo(a).data("ui-autocomplete-item",
b)},_resizeMenu:function(){var a=this;setTimeout(function(){var b=a.menu.element,c=b.css("max-height")||0,f=Math.max(b.width("").outerWidth()+1,a.element.outerWidth());a.element.height();var k=$(window).height()-a.options.outHeight-b.offset().top;b.css({width:f,maxHeight:c&&k>c?c:k})},10)}});return{require:"ngModel",link:function(f,d,e,l){function k(a){y(x)&&(l.$viewValue||0===l.$viewValue?a&&a.item&&(a.item.label=y(a.item.label)?$("\x3cdiv\x3e").append(a.item.label).html():a.item.label,A(x,a.item)):
h(x),w(l.$viewChangeListeners,function(a){try{a()}catch(D){c(D)}}))}function h(a){if(y(a)){var b=/^\$/;w(a,function(c,e){var d=typeof c;b.test(e)||("number"===d?a[e]=0:"string"===d?a[e]="":"boolean"===d?a[e]=!1:y(c)&&h(c))})}}var g=!1,n=null,r={},x=null,w=angular.forEach,y=angular.isObject,A=angular.extend,u=f.$eval(e.uiAutocomplete),B=angular.bind(d,d.val),t=f.$watch(e.ngModel,function(a){x=a;y(x)&&(l.$formatters.push(function(a){return a.value}),l.$parsers.push(function(a){x.value=a;return x}),
f.$watch(e.ngModel,function(a){a&&B()!==a.value&&(l.$viewValue=a.value,l.$render())},!0),l.$pristine=!1,l.$setViewValue(x.value),l.$pristine=!0);a&&t()}),z={open:function(a,b){g=!0;n=null},close:function(a,b){g=!1},select:function(b,c){n=c;a(function(){d.blur()},0)},change:function(a,b){var c=B(),e=!1;n&&n.item&&-1!==c.indexOf(n.item.value)&&(c=n.item.value,e=!0);f.$apply(function(){u.options.onlySelectValid&&l.$setValidity("onlyselect",e);null===c?l.$render():""===c?k():l.$viewValue!==c&&(l.$setViewValue(c),
l.$render(),k(n))})}};y(u)&&(u.methods={},u.options=function(a){a=y(a)?a:{};a.disabled=a.source?a.disabled:!0;a.appendTo=a.appendTo||d.parents(".ng-view")[0]||d.parents("[ng-view]")[0]||null;a.minLength=a.focusOpen?0:a.minLength;a.outHeight=a.outHeight||0;a.position=a.position||{my:"left top",at:"left bottom",collision:"flip"};return a}(u.options),w("change close create focus open response search select".split(" "),function(a){var b=u.options[a];b="function"===typeof b?b:angular.noop;r[a]=function(c,
e){if(z[a])z[a](c,e);b(c,e);if(u.events&&"function"===typeof u.events[a])u.events[a](c,e)}}),w("close destroy disable enable instance option search widget".split(" "),function(a){u.methods[a]=function(){var b=m.call(arguments);b.unshift(a);return d.autocomplete.apply(d,b)}}),u.methods.filter=b,u.methods.clean=function(){l.$setViewValue("");l.$render();k()},d.on("focus",function(){u.options.focusOpen&&!g&&d.autocomplete("search","")}),d.autocomplete(A({},u.options,r)),u.widget=d.autocomplete("widget"))}}}]);
Util=window.Util||{};
(function(){for(var a="[a\u00e0\u00e1\u00e2\u00e4\u00e6\u00e3\u00e5\u0101] [c\u00e7\u0107\u010d] [e\u00e8\u00e9\u00ea\u00eb\u0113\u0117\u0119] [i\u00ee\u00ef\u00ed\u012b\u012f\u00ec] [l\u0142] [n\u00f1\u0144] [o\u00f4\u00f6\u00f2\u00f3\u0153\u00f8\u014d\u00f5] [s\u00df\u015b\u0161] [u\u00fb\u00fc\u00f9\u00fa\u016b] [y\u00ff] [z\u017e\u017a\u017c]".split(" "),c={},b=0;b<a.length;b++){var g=a[b];c[g]=new RegExp(g,"i")}Util.diacriticMapper=function(a){for(var b in c)if(c[b].test(a))return b;return a};
Util.constructDiacriticMatcher=function(a,b){a=a.trim();b&&(a=a.replace(new RegExp(b,"ig"),""));a=a.split("");for(var c=b?b:"",d=a.length,e=0;e<d;e++)c+=Util.diacriticMapper(a[e]),b&&(c+=b);return new RegExp(c,"i")}})();
angular.module("typeahead",["ui.autocomplete"]).service("cachetypeahead",["$log","$q",function(a,c){return function(b,g,h){function m(a,b){a=a.trim();a=a.split("");var c="";b&&(c+="^");b=a.length;for(var e=0;e<b;e++)c+=Util.diacriticMapper(a[e]);return new RegExp(c,"i")}function f(a,b,c,e){var d=!1;a&&b&&(c&&(a=a.toLowerCase(),b=b.toLowerCase()),e&&(a=a.replace(e,""),b=b.replace(e,"")),d=m(b,!0).test(a));return d}function d(a,b,c){a&&(a=a.replace(c,""));for(var e=[],d=0;d<l.length;d++){var k=l[d];
if(a&&""!==a){var f=a,h=c,q=!1;k&&f&&(q=k,b&&(q=q.toLowerCase()),h&&(q=q.replace(h,"")),q=m(f,!1).test(q));q&&e.push(k)}else e.push(k)}return e}var e="",l=[];return function(k){var q=c.defer();f(k,e,g,h)?(a.debug("Cache HIT with value: ",k),q.resolve(d(k,g,h))):(a.debug("Cache MISS with value: ",k),e=k,b.call(this,k).then(function(a){l=a;q.resolve(d(k,g,h))}));return q.promise}}}]).service("createMatchStyler",["$log",function(a){return function(a,b){a||(a="typeahead-match");b||(b="[^A-Za-z0-9\u00c0-\u017f]");
var c,h=[],m,f=function(a,b,l,k){b&&(c.test(b)?b.replace(c,f):h.push({text:b,match:!1}));l&&h.push({text:l,match:!0});k&&(c.test(k)?k.replace(c,f):h.push({text:k,match:!1}))};return function(d,e){var l=d,k;if(k=d&&e)k=e?0<e.replace(new RegExp(b,"ig"),"").length:!1;if(k){l="";if(void 0!==e){e=e.trim();e=e.replace(new RegExp(b,"g"),"").split("");k="";for(var q=e.length,g=0;g<q;g++)k+=Util.diacriticMapper(e[g]),g<q-1&&(k+=b+"*");m=new RegExp("(.*)("+k+")(.*)","i")}c=m;h=[];f(null,null,null,d);for(d=
0;d<h.length;d++)e=h[d],l=e.match?l+('\x3cspan class\x3d"'+a+'"\x3e'+e.text+"\x3c/span\x3e"):l+e.text}return l}}}]);String.prototype.includes||(String.prototype.includes=function(a,c){"number"!==typeof c&&(c=0);return c+a.length>this.length?!1:-1!==this.indexOf(a,c)});
(function(){window.fmmp=window.fmmp||{};window.fmmp.partfinderresults=window.fmmp.partfinderresults||{};window.fmmp.partfinderresults.ng=angular.module("fmmp.partfinderresults",["ngCookies","angular-cache"]);window.fmmp.partfinderresults.ng.run(["$log","$http","$rootScope","ApiUtilitiesService",function(a,c,b,g){c.defaults.headers.common["Accept-Language"]=g.getLocale();b.$on("changeLocale",function(h,m){h=m;-1===g.getAvailableLocales().indexOf(m)&&(h=g.getLocale(),a.error("Locale was not contained in the available locales configured in global properties, using page or default locale: "+
h));c.defaults.headers.common["Accept-Language"]=h;b.$broadcast("handleChangeLocale",h)})}])})();
var SearchMessage=function(a,c){var b=this;null!==c&&"undefined"!==typeof c&&(b.SearchService=c);b.reset=function(){b.count=10;b.offset=0;b.totalResults=0;b.locale;b.sort="";b.filters=[];b.includeCriteria=[];b.data=[]};b.reset();if(null!==a&&"undefined"!==typeof a)for(var g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);b.addFilter=function(a){if(null===b.filters||"undefined"===typeof b.filters)b.filters=[];null==b.getFilter(a)&&b.filters.push(a)};b.clearFilters=function(){b.filters=[]};b.removeFilter=function(a){for(var c=
0;c<b.filters.length;c++)a===b.filters[c]&&b.filters.splice(c,1)};b.getFilter=function(a){for(var c=0;c<b.filters.length;c++)if(a===b.filters[c])return b.filters[c]};b.nextPage=function(){var a=b.offset;b.offset+=b.count;b.offset>=b.totalResults&&(b.offset=a);return b.SearchService.search(b.searchRepresentation())};b.prevPage=function(){b.offset-=b.count;0>b.offset&&(b.offset=0);return b.SearchService.search(b.searchRepresentation())};b.goPage=function(a){var c=b.offset;b.offset=(a-1)*b.count;0>b.offset&&
(b.offset=0);b.offset>=b.totalResults&&(b.offset=c);return b.SearchService.search(b.searchRepresentation())};b.lastPage=function(){b.onLastPage()||(b.offset=(b.totalPages()-1)*b.count);return b.SearchService.search(b.searchRepresentation())};b.firstPage=function(){b.offset=0;return b.SearchService.search(b.searchRepresentation())};b.hasNextPage=function(){return b.totalResults?b.offset+b.count<b.totalResults:!1};b.hasPrevPage=function(){return b.offset?0<b.offset:!1};b.onFirstPage=function(){return 0===
b.offset};b.onLastPage=function(){return b.currentPage()===b.totalPages()};b.currentPage=function(){return Math.floor(b.offset/b.count)+1};b.totalPages=function(){return Math.ceil(b.totalResults/b.count)};b.searchRepresentation=function(){var a={};a.count=b.count;a.offset=b.offset;a.locale=b.locale;a.sort=b.sort;a.filters=b.filters;a.includeCriteria=b.includeCriteria;return a};b.mergeAttributesCriteria=function(a){if(a&&a.data)for(var b=0;b<a.data.length;b++)for(var c=a.data[b],d=c.attributes||[],
e=c.fitment_criteria||c.axle_criteria||c.engine_criteria||[],l=0;l<e.length;l++){var k=e[l];if(1===k.length){k=k[0];for(var h=!1,g=0;g<d.length;g++){var n=d[g];n.name===k.criteria_name&&(h=!0,n.value.includes(k.criteria_value)||(n.value=n.value+", "+k.criteria_value))}h||d.push({name:k.criteria_name,sort:k.criteria_sort,value:k.criteria_value,immediate:k.criteria_immediate,type:k.criteria_type,filterable:k.criteria_filterable});e.splice(l,1);l--}c.attributes=d}};b.mergeAttributesCriteria(a)};
window.SearchMessage=SearchMessage;var VehicleSegments={"LV/LCV":["make","model","variant"],CV:["make","model","variant"],HV:["part_number"],ATV:["make","cc_tech","model"],MC:["make","cc_tech","model"],SNOWMOBILE:["make","cc_tech","model"],AGRICULTURAL:["make","variant","model","engine_display"],COMMERCIAL:["make","variant","model","engine_display"],MARINE:["make","variant","model","engine_display"],"SMALL ENGINE":["make","variant","model","engine_display"]};window.VehicleSegments=VehicleSegments;
(function(){var a=window.fmmp.partfinderresults.ng;a.filter("filtertitle",["$log",function(a){return function(b){return angular.isUndefined(b)?(a.warn("Filter was undefined"),""):b.hasOwnProperty("fitmentTerms")?"Fitment Search":b.hasOwnProperty("partAttributeTerms")?"Part Attribute":b.hasOwnProperty("partNumberFilter")?"Part Number":b.hasOwnProperty("partTerms")?"Part Terms":b.hasOwnProperty("category")?"Category":""}}]);a.filter("filterdetails",["$log",function(a){return function(b){if(angular.isUndefined(b))return a.warn("Filter was undefined"),
"";if(b.hasOwnProperty("fitmentTerms")){var c="",h;for(h in b.fitmentTerms)c+=h+":"+b.fitmentTerms[h]+" ";return c}if(b.hasOwnProperty("partAttributeTerms"))return c="",b.partAttributeTerms.attribute_name&&(c+=b.partAttributeTerms.attribute_name,b.partAttributeTerms.attribute_value&&(c+=":"+b.partAttributeTerms.attribute_value)),c;if(b.hasOwnProperty("partNumberFilter"))return b.partNumberFilter;if(b.hasOwnProperty("partTerms")){c="";for(h in b.partTerms)c+=h+":"+b.partTerms[h]+" ";return c}return b.hasOwnProperty("category")?
b.category:""}}])})();
(function(){window.fmmp.partfinderresults.ng.factory("ApiUtilitiesService",["$log","$http","$q","BlockingCache",function(a,c,b,g){var h={},m=null;h.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?\x26]"+a+"\x3d([^\x26#]*)")).exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))};h.getBaseUrl=function(){return $("body").data("brokerurl")};h.getAvailableLocales=function(){var a=($("body").data("brokerlocales")||"").trim(),
b=[];angular.isUndefined(a)||""===a?b.push("en_GB"):b=b.concat(a.split(","));return b};h.getLocale=function(){if(m)return m;var a=($("body").data("locale")||"").trim();if(angular.isUndefined(a)||""===a||-1===h.getAvailableLocales().indexOf(a))a=h.getDefaultLocale();return a};h.overrideLocale=function(a){m=c.defaults.headers.common["Accept-Language"]=a};h.setEnforcedBrand=function(a){var b=$("body").data("enforcedbrand")||"",c=!1;""!==String(b)&&(a.filters=a.filters||[],h.isBrandFilterAlreadySet(a.filters)||
a.filters.push({partTerms:{brand_and_sub_brand_id:[b+":brand_id"]}}),c=!0);return c};h.isBrandFilterAlreadySet=function(a){return 0<a.filter(function(a){return a.partTerms&&!!a.partTerms.brand_and_sub_brand_id}).length};h.addEnforcedBrand=function(a){var b=$("body").data("enforcedbrand")||"",c=!1;if(""!=b){c=!1;for(var l=0;l<a.filters.length;l++){var k=a.filters[l];k.hasOwnProperty("partTerms")&&(c=!0,k.partTerms.hasOwnProperty("brand_and_sub_brand_id")||(k.partTerms.brand_and_sub_brand_id=[b+":brand_id"]))}c||
a.filters.push({partTerms:{brand_and_sub_brand_id:[b+":brand_id"]}});c=!0}return c};h.getDefaultLocale=function(){return h.getAvailableLocales()[0]};h.search=function(f,d){var e=b.defer();d.locale=h.getLocale();var l=h.getBaseUrl()+"/"+f+"/search";g.get({method:"search",url:l,msg:d},function(){return c.post(l,d)},{ttl:3E5}).then(function(a){e.resolve(a.data)},function(b){a.error(b);e.reject(b)});return e.promise};h.deepClone=function(a){return JSON.parse(JSON.stringify(a))};h.isUndefinedOrNull=function(a){return angular.isUndefined(a)||
!a};h.getFacets=function(f,d,e){var l=b.defer();e.locale=h.getLocale();g.get({method:"getFacets",core:f,field:d,msg:e},function(){return c.post(h.getBaseUrl()+"/facets/"+f+"/"+d,e,{})},{ttl:3E5}).then(function(a){l.resolve(a.data)},function(b){a.error(b);l.reject(b)});return l.promise};h.getMultiFacets=function(f,d,e){var l=b.defer();e.locale=h.getLocale();g.get({method:"getMultiFacets",core:f,fields:d,msg:e},function(){return c.post(h.getBaseUrl()+"/facets/"+f+"/"+d.join(),e,{})},{ttl:3E5}).then(function(a){l.resolve(a.data)},
function(b){a.error(b);l.reject(b)});return l.promise};h.getExistingFilters=function(a,b){var c=[];if("part"!==a&&(!b||!b.search_type||b&&b.search_type&&b.search_type===a))for(var d in b)"brand_id"!==d&&"sub_brand_id"!==d&&"category_id"!==d&&"subcategory_id"!==d&&0!==d.indexOf("attr")||c.push({key:d,value:b[d]});return c};h.hasExistingFilters=function(a){return 0<h.getExistingFilters(a.search_type,a).length};h.addCountOffsetToTerms=function(a,b,c){h.isUndefinedOrNull(a)&&(a={});h.isUndefinedOrNull(b)&&
(b=10);h.isUndefinedOrNull(c)&&(c=0);a.count=b;a.offset=c;return a};return h}])})();
(function(){window.fmmp.partfinderresults.ng.factory("FitmentService",["$log","$http","$q","ApiUtilitiesService","BlockingCache",function(a,c,b,g,h){function m(a){d.searchMessage=a}function f(b){a.error(b)}var d={createSearchMessage:function(a){d.searchMessage=new SearchMessage(a,d);return d.searchMessage}};d.createSearchMessage();d.getFacets=function(a,b){return g.getFacets("fitments",a,b)};d.getMultiFacets=function(a,b){return g.getFacets("fitments",a,b)};d.search=function(e,l){var k=b.defer();
d.searchMessage.locale=g.getLocale();g.isUndefinedOrNull(e)&&(e=d.searchMessage.searchRepresentation());e.locale=g.getLocale();h.get({method:"fitmentService.search",msg:e},function(){return c.post(g.getBaseUrl()+"/fitments/search",e,{})},{ttl:6E5}).then(function(a){l?k.resolve(a.data):(d.searchMessage=d.createSearchMessage(a.data),k.resolve(d.searchMessage))},function(b){a.error(b);k.reject(b)});return k.promise};d.addFilter=function(a){var c=b.defer();d.searchMessage.offset=0;d.searchMessage.filters.push(a);
d.search().then(function(a){c.resolve(a)},function(a){c.reject(a)});return c.promise};d.nextPage=function(){d.searchMessage.nextPage().then(m,f)};d.prevPage=function(){d.searchMessage.prevPage().then(m,f)};d.firstPage=function(){d.searchMessage.firstPage().then(m,f)};d.lastPage=function(){d.searchMessage.lastPage().then(m,f)};d.showResults=function(){var a=d.searchMessage;return a&&a.data&&0<a.data.length};d.deleteFilter=function(b){if(angular.isDefined(d.searchMessage.filters)){for(var c=[],e=0;e<
d.searchMessage.filters.length;e++){var f=d.searchMessage.filters[e];a.debug("Checking if",f,"matches",b,"that was passed in");b!==f&&(a.debug("It didn't match, so add this to the new filter array"),c.push(f))}a.debug("New filters to search with are: ",c);d.searchMessage=d.createSearchMessage();d.searchMessage.count=10;d.searchMessage.filters=c;a.debug("Searchmessage is: ",d.searchMessage.searchRepresentation());d.search()}};d.resetSearch=function(){d.searchMessage=d.createSearchMessage();d.searchMessage.count=
10};d.resetSearch();d.pageUpdate=function(a){""!==a&&(isNaN(a)||!angular.isNumber(parseInt(a))||1>a)&&(a=1);""!==a&&a>d.searchMessage.totalPages()&&(a=d.searchMessage.totalPages());d.searchMessage.goPage(a);return a};return d}])})();
(function(){window.fmmp.partfinderresults.ng.factory("SearchService",["$rootScope","$log","$http","$q","ApiUtilitiesService","BlockingCache",function(a,c,b,g,h,m){function f(b){e.searchMessage=b;a.$broadcast("PageChangeComplete",{})}function d(b){c.error(b);a.$broadcast("PageChangeComplete",{})}var e={},l=null;e.createSearchMessage=function(a){e.searchMessage=new SearchMessage(a,e);return e.searchMessage};e.createSearchMessage();e.search=function(d,f){var k=g.defer();l&&l.resolve();l=g.defer();e.searchMessage.locale=
h.getLocale();h.isUndefinedOrNull(d)&&(d=e.searchMessage.searchRepresentation());d.locale=h.getLocale();m.get({method:"searchService.search",msg:d},function(){return b.post(h.getBaseUrl()+"/parts/search",d,{timeout:l.promise})},{ttl:6E5}).then(function(b){l=null;f?k.resolve(b.data):(c.debug(b.data),e.searchMessage=e.createSearchMessage(b.data),k.resolve(e.searchMessage));a.$broadcast("partSearchCompleted",d)},function(a){l=null;c.error(a);k.reject(a)});return k.promise};e.addFilter=function(a){var b=
g.defer();e.searchMessage.offset=0;e.searchMessage.filters.push(a);e.search().then(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};e.nextPage=function(){a.$broadcast("PageChangeStart",{});e.searchMessage.nextPage().then(f,d)};e.prevPage=function(){a.$broadcast("PageChangeStart",{});e.searchMessage.prevPage().then(f,d)};e.firstPage=function(){a.$broadcast("PageChangeStart",{});e.searchMessage.firstPage().then(f,d)};e.lastPage=function(){a.$broadcast("PageChangeStart",{});e.searchMessage.lastPage().then(f,
d)};e.showResults=function(){var a=e.searchMessage;return a&&a.data&&0<a.data.length};e.deleteFilter=function(a){if(angular.isDefined(e.searchMessage.filters)){for(var b=[],d=0;d<e.searchMessage.filters.length;d++){var k=e.searchMessage.filters[d];c.debug("Checking if",k,"matches",a,"that was passed in");a!==k&&(c.debug("It didn't match, so add this to the new filter array"),b.push(k))}c.debug("New filters to search with are: ",b);e.searchMessage=e.createSearchMessage();e.searchMessage.count=10;e.searchMessage.offset=
0;e.searchMessage.filters=b;c.debug("Searchmessage is: ",e.searchMessage.searchRepresentation());e.search()}};e.resetSearch=function(){e.searchMessage=e.createSearchMessage();e.searchMessage.count=10};e.resetSearch();e.pageUpdate=function(a){""!==a&&(isNaN(a)||!angular.isNumber(parseInt(a))||1>a)&&(a=1);""!==a&&a>e.searchMessage.totalPages()&&(a=e.searchMessage.totalPages());e.searchMessage.goPage(a);return a};return e}])})();
(function(){window.fmmp.partfinderresults.ng.factory("InterchangeSearchService",["$rootScope","$log","$http","$q","ApiUtilitiesService","BlockingCache",function(a,c,b,g,h,m){function f(b){e.searchMessage=b;a.$broadcast("PageChangeComplete",{})}function d(b){a.$broadcast("PageChangeComplete",{});c.error(b)}var e={},l=null;e.createSearchMessage=function(a){e.searchMessage=new SearchMessage(a,e);return e.searchMessage};e.createSearchMessage();e.search=function(a,d){var k=g.defer();l&&l.resolve();l=g.defer();
e.searchMessage.locale=h.getLocale();h.isUndefinedOrNull(a)?(h.setEnforcedBrand(e.searchMessage),a=e.searchMessage.searchRepresentation()):h.addEnforcedBrand(a);a.locale=h.getLocale();m.get({method:"InterchangeSearchService.search",msg:a},function(){return b.post(h.getBaseUrl()+"/interchanges/search",a,{timeout:l.promise})},{ttl:6E5}).then(function(a){l=null;d?k.resolve(a.data):(c.debug(a.data),e.searchMessage=e.createSearchMessage(a.data),k.resolve(e.searchMessage))},function(a){l=null;c.error(a);
k.reject(a)});return k.promise};e.addFilter=function(a){var b=g.defer();e.searchMessage.offset=0;e.searchMessage.filters.push(a);e.search().then(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};e.nextPage=function(){a.$broadcast("PageChangeStart",{});e.searchMessage.nextPage().then(f,d)};e.prevPage=function(){a.$broadcast("PageChangeStart",{});e.searchMessage.prevPage().then(f,d)};e.firstPage=function(){a.$broadcast("PageChangeStart",{});e.searchMessage.firstPage().then(f,d)};
e.lastPage=function(){a.$broadcast("PageChangeStart",{});e.searchMessage.lastPage().then(f,d)};e.showResults=function(){var a=e.searchMessage;return a&&a.data&&0<a.data.length};e.deleteFilter=function(a){if(angular.isDefined(e.searchMessage.filters)){for(var b=[],d=0;d<e.searchMessage.filters.length;d++){var l=e.searchMessage.filters[d];c.debug("Checking if",l,"matches",a,"that was passed in");a!==l&&(c.debug("It didn't match, so add this to the new filter array"),b.push(l))}c.debug("New filters to search with are: ",
b);e.searchMessage=e.createSearchMessage();e.searchMessage.count=10;e.searchMessage.filters=b;c.debug("Searchmessage is: ",e.searchMessage.searchRepresentation());e.search()}};e.resetSearch=function(){e.searchMessage=e.createSearchMessage();e.searchMessage.count=10};e.resetSearch();e.pageUpdate=function(a){""!==a&&(isNaN(a)||!angular.isNumber(parseInt(a))||1>a)&&(a=1);""!==a&&a>e.searchMessage.totalPages()&&(a=e.searchMessage.totalPages());e.searchMessage.goPage(a);return a};return e}])})();
(function(){window.fmmp.partfinderresults.ng.factory("PartService",["$log","$http","$q","ApiUtilitiesService","BlockingCache",function(a,c,b,g,h){return{getPart:function(a,b){var d={};d.partCanBeObsolete=b;return h.get({method:"getPart",part_id:a},function(){return c.get(g.getBaseUrl()+"/parts/"+a,{params:d})},{ttl:3E5})},getFacets:function(a,b){g.setEnforcedBrand(b);return g.getFacets("parts",a,b)},getMultiFacets:function(a,b){g.setEnforcedBrand(b);return g.getFacets("parts",a,b)},getPartCountsForCategory:function(a,
b){g.isUndefinedOrNull(b)&&(b={});return h.get({method:"getPartCountsForCategory",category:a,terms:b},function(){return c.get(g.getBaseUrl()+"/category/"+a+"/parts/count",{params:b})},{ttl:6E4})},search:function(a){g.setEnforcedBrand(a);return g.search("parts",a)},availableFilters:function(m){var f=b.defer();m.locale=g.getLocale();g.setEnforcedBrand(m);var d=g.getBaseUrl()+"/parts/available-filters";h.get({method:"availableFilters",msg:m.searchRepresentation()},function(){return c.post(d,m.searchRepresentation())},
{ttl:6E4}).then(function(a){f.resolve(a.data)},function(b){a.error(b);f.reject(b)});return f.promise},getMetadata:function(m){var f=b.defer(),d=g.getLocale(),e="/bin/fmmp/api/part-metadata.json/loc-emea/"+d+"/"+m+"/data.json";h.get({method:"metadata",part_id:m,locale:d},function(){return c.get(e)}).then(function(a){f.resolve(a.data)},function(b){a.error(b);f.reject(b)});return f.promise}}}])})();
(function(){window.fmmp.partfinderresults.ng.factory("PartAttributeService",["$log","$http","ApiUtilitiesService",function(a,c,b){return{getFacets:function(a,c){return b.getFacets("parts",a,c)}}}])})();
(function(){window.fmmp.partfinderresults.ng.factory("EngineService",["$log","$http","$q","ApiUtilitiesService","BlockingCache",function(a,c,b,g,h){function m(a){d.searchMessage=a}function f(b){a.error(b)}var d={createSearchMessage:function(a){d.searchMessage=new SearchMessage(a,d);return d.searchMessage}};d.createSearchMessage();d.getFacets=function(a,b){return g.getFacets("engines",a,b)};d.getMultiFacets=function(a,b){return g.getFacets("engines",a,b)};d.search=function(e,l){var k=b.defer();d.searchMessage.locale=
g.getLocale();g.isUndefinedOrNull(e)&&(e=d.searchMessage.searchRepresentation());e.locale=g.getLocale();h.get({method:"engineService.search",msg:e},function(){return c.post(g.getBaseUrl()+"/engines/search",e,{})},{ttl:6E5}).then(function(a){l?k.resolve(a.data):(d.searchMessage=d.createSearchMessage(a.data),k.resolve(d.searchMessage))},function(b){a.error(b);k.reject(b)});return k.promise};d.addFilter=function(a){var c=b.defer();d.searchMessage.offset=0;d.searchMessage.filters.push(a);d.search().then(function(a){c.resolve(a)},
function(a){c.reject(a)});return c.promise};d.nextPage=function(){d.searchMessage.nextPage().then(m,f)};d.prevPage=function(){d.searchMessage.prevPage().then(m,f)};d.firstPage=function(){d.searchMessage.firstPage().then(m,f)};d.lastPage=function(){d.searchMessage.lastPage().then(m,f)};d.showResults=function(){var a=d.searchMessage;return a&&a.data&&0<a.data.length};d.deleteFilter=function(b){if(angular.isDefined(d.searchMessage.filters)){for(var c=[],e=0;e<d.searchMessage.filters.length;e++){var f=
d.searchMessage.filters[e];a.debug("Checking if",f,"matches",b,"that was passed in");b!==f&&(a.debug("It didn't match, so add this to the new filter array"),c.push(f))}a.debug("New filters to search with are: ",c);d.searchMessage=d.createSearchMessage();d.searchMessage.count=10;d.searchMessage.filters=c;a.debug("Searchmessage is: ",d.searchMessage.searchRepresentation());d.search()}};d.resetSearch=function(){d.searchMessage=d.createSearchMessage();d.searchMessage.count=10};d.resetSearch();d.pageUpdate=
function(a){""!==a&&(isNaN(a)||!angular.isNumber(parseInt(a))||1>a)&&(a=1);""!==a&&a>d.searchMessage.totalPages()&&(a=d.searchMessage.totalPages());d.searchMessage.goPage(a);return a};return d}])})();
(function(){window.fmmp.partfinderresults.ng.factory("AxleService",["$log","$http","$q","ApiUtilitiesService","BlockingCache",function(a,c,b,g,h){function m(a){d.searchMessage=a}function f(b){a.error(b)}var d={createSearchMessage:function(a){d.searchMessage=new SearchMessage(a,d);return d.searchMessage}};d.createSearchMessage();d.getFacets=function(a,b){return g.getFacets("axles",a,b)};d.getMultiFacets=function(a,b){return g.getFacets("axles",a,b)};d.search=function(e,l){var k=b.defer();d.searchMessage.locale=
g.getLocale();g.isUndefinedOrNull(e)&&(e=d.searchMessage.searchRepresentation());e.locale=g.getLocale();h.get({method:"axleService.search",msg:e},function(){return c.post(g.getBaseUrl()+"/axles/search",e,{})},{ttl:6E5}).then(function(a){l?k.resolve(a.data):(d.searchMessage=d.createSearchMessage(a.data),k.resolve(d.searchMessage))},function(b){a.error(b);k.reject(b)});return k.promise};d.addFilter=function(a){var c=b.defer();d.searchMessage.offset=0;d.searchMessage.filters.push(a);d.search().then(function(a){c.resolve(a)},
function(a){c.reject(a)});return c.promise};d.nextPage=function(){d.searchMessage.nextPage().then(m,f)};d.prevPage=function(){d.searchMessage.prevPage().then(m,f)};d.firstPage=function(){d.searchMessage.firstPage().then(m,f)};d.lastPage=function(){d.searchMessage.lastPage().then(m,f)};d.showResults=function(){var a=d.searchMessage;return a&&a.data&&0<a.data.length};d.deleteFilter=function(b){if(angular.isDefined(d.searchMessage.filters)){for(var c=[],e=0;e<d.searchMessage.filters.length;e++){var f=
d.searchMessage.filters[e];a.debug("Checking if",f,"matches",b,"that was passed in");b!==f&&(a.debug("It didn't match, so add this to the new filter array"),c.push(f))}a.debug("New filters to search with are: ",c);d.searchMessage=d.createSearchMessage();d.searchMessage.count=10;d.searchMessage.filters=c;a.debug("Searchmessage is: ",d.searchMessage.searchRepresentation());d.search()}};d.resetSearch=function(){d.searchMessage=d.createSearchMessage();d.searchMessage.count=10};d.resetSearch();d.pageUpdate=
function(a){""!==a&&(isNaN(a)||!angular.isNumber(parseInt(a))||1>a)&&(a=1);""!==a&&a>d.searchMessage.totalPages()&&(a=d.searchMessage.totalPages());d.searchMessage.goPage(a);return a};return d}])})();(function(){window.fmmp.partfinderresults.ng.factory("PlateService",["$log","$http","ApiUtilitiesService","BlockingCache",function(a,c,b,g){return{search:function(a){return g.get({method:"PlateService.search",plateNumber:a},function(){return c.get(b.getBaseUrl()+"/plates/"+a+"/fitment")})}}}])})();
(function(){window.fmmp.partfinderresults.ng.factory("VinService",["$log","$http","ApiUtilitiesService","BlockingCache",function(a,c,b,g){return{search:function(a){return g.get({method:"VinService.search",vin:a},function(){return c.get(b.getBaseUrl()+"/vins/"+a+"/fitment")})}}}])})();
(function(){window.fmmp.partfinderresults.ng.factory("PartFinderHistoryService",["$log","$q","FitmentService","CookieService",function(a,c,b,g){var h=function(){var a=[];try{a=g.getObject("fmmp-partfinder-fitment-id-history")}catch(d){m([])}return a},m=function(a){var b=new Date((new Date).setFullYear((new Date).getFullYear()+1));g.putObject("fmmp-partfinder-fitment-id-history",a,{path:"/",expires:b})};return{addFitment:function(b){if(!b)return a.error("No fitment_id found"),null;var c=h();if(c){var e=
-1;$.each(c,function(a,c){if(c===b)return e=a,!1});0<=e?c.splice(e,1):10<=c.length&&c.splice(9,c.length-9);c.unshift(b);m(c)}else m([b])},getFitments:function(){var a=c.defer(),d=h();if(d){var e=[],l=[];angular.forEach(d,function(a){l.push(b.search(new SearchMessage({filters:[{fitmentTerms:{fitment_id:[a]}}]})))});c.all(l).then(function(b){angular.forEach(b,function(a){a&&a.data&&1===a.data.length&&e.push(a.data[0])});a.resolve(e)})}else a.resolve([]);return a.promise}}}])})();
(function(){window.fmmp.partfinderresults.ng.factory("InterchangeService",["$log","$http","ApiUtilitiesService","BlockingCache",function(a,c,b,g){return{partSearchByCompetitor:function(a,m,f,d){m=b.addCountOffsetToTerms(m,f,d);return g.get({method:"InterchangeService.partSearchByCompetitor",competitorPartNumber:a,terms:m,count:f,offset:d},function(){return c.get(b.getBaseUrl()+"/interchanges/"+a+"/parts",{params:m})},{ttl:6E5})},getFacets:function(a,c){b.setEnforcedBrand(c);return b.getFacets("interchanges",
a,c)},getMultiFacets:function(a,c){b.setEnforcedBrand(c);return b.getFacets("interchanges",a,c)}}}])})();
(function(){window.fmmp.partfinderresults.ng.factory("BlockingCache",["$log","$q","CacheFactory",function(a,c,b){var g={};b.get("partFinderCache")||b.createCache("partFinderCache",{deleteOnExpire:"aggressive",storageMode:"sessionStorage",recycleFreq:15E3});g._cache=b.get("partFinderCache");g._naiveHash=function(a){if(!a||""===a||a==={})throw Error("A key must be specified");a="string"===typeof a?a:JSON.stringify(a);for(var b=5381,c=a.length;c;)b=33*b^a.charCodeAt(--c);return b>>>0};g.promiseList=
{};g.get=function(b,m,f){var d=c.defer();if(!b||""==b||angular.isObject(b)&&0===Object.keys(b).length&&b.constructor===Object)throw Error("A key must be specified");if(angular.isDefined(m)&&!angular.isFunction(m))throw Error("The second parameter must be a loader function");angular.isString(b)||(b=g._naiveHash(b));f||(f={});f.ttl||f.expires||(f.ttl=864E5);if(f.ttl){var e=f.ttl;f.expires=(new Date).getTime()+e;delete f.ttl}g._cache.get(b)?d.resolve(g._cache.get(b)):g.promiseList[b]?(a.debug("Already running the loader for this request, adding to promise list"),
g.promiseList[b].push(d)):(g.promiseList[b]=[d],c.when(m()).then(function(a){g._cache.put(b,a,f);var c=g.promiseList[b];delete g.promiseList[b];angular.forEach(c,function(b){b.resolve(a)})},function(c){a.error("Had an error running loader function",c);var d=g.promiseList[b];delete g.promiseList[b];angular.forEach(d,function(a){a.reject(c)})}));return d.promise};return g}])})();
(function(){window.fmmp.partfinderresults.ng.controller("PartFinderResultsController",["$log","$element","$scope","$rootScope","$http","SearchService",function(a,c,b,g,h,m){b.SearchService=m;b.$on("searchMessage",function(a,c){b.searchMessage=c});b.moreInfo=function(a){b.selected_part=a;c.find(".part-detail-modal").modal()}}])})();
(function(){window.fmmp.partfinderresults.ng.controller("PartAttributeSearchController",["$log","$scope","SearchService","PartAttributeService",function(a,c,b,g){c.expanded=!1;b.searchMessage.filters.push({partAttributeTerms:{attribute_filterable:[!0]}});c.showAttributeFilter=function(){return!0};c.showExpanded=function(){c.showAttributeFilter()&&c.expanded};c.toggleExpanded=function(){c.expanded=!c.expanded;c.expanded&&c.getNames()};var h=c.$on("partSearchCompleted",function(a,b){c.expanded=!1});
c.$on("$destroy",function(){h()});c.getNames=function(){g.getFacets("attribute_name",b.searchMessage.searchRepresentation()).then(function(a){c.names=a})};c.nameOptions={options:{minLength:0,delay:0,focusOpen:!0,onlySelectValid:!0,source:function(a,b){b(c.nameOptions.methods.filter(c.names,a.term))}},events:{change:function(a,b){c.getValues()}}};c.valueOptions={options:{minLength:0,delay:0,focusOpen:!0,onlySelectValid:!0,source:function(a,b){b(c.valueOptions.methods.filter(c.values,a.term))}},events:{change:function(a,
b){c.addFilter()}}};c.getValues=function(){var a=c.name;if(angular.isDefined(a)){var f=JSON.parse(JSON.stringify(b.searchMessage.searchRepresentation()));f.filters.push({partAttributeTerms:{attribute_name:[a]}});g.getFacets("attribute_value",f).then(function(a){c.values=a})}};c.addFilter=function(){var a=c.name,f=c.value;angular.isDefined(a)&&angular.isDefined(f)&&(b.addFilter({partAttributeTerms:{attribute_name:[a],attribute_value:[f]}}),c.name=void 0,c.names=void 0,c.value=void 0,c.values=void 0,
c.toggleExpanded())}}])})();(function(){window.fmmp.partfinderresults.ng.controller("PartNumberConsoleSearchController",["$log","$scope","SearchService","PartAttributeService",function(a,c,b,g){c.expanded=!1;c.toggleExpanded=function(){c.expanded=!c.expanded};c.addFilter=function(){b.addFilter({partNumberFilter:c.part_number});c.resetSearch();c.toggleExpanded()};c.resetSearch=function(){c.part_number=void 0}}])})();
(function(){window.fmmp=window.fmmp||{};window.fmmp.partfinder=window.fmmp.partfinder||{};window.fmmp.partfinder.ng=angular.module("fmmp.partfinder",["fmmp.base","fmmp.partfinderresults","typeahead","fmmp.partfindervehicle"]);window.fmmp.partfinder.ng.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1})}])})();
(function(){window.fmmp.partfinder.ng.controller("PartFinderController",["$log","$element","$scope","$timeout","util","$window","scroll",function(a,c,b,g,h,m,f){b.tabsToDisplay=[];var d=b.hashContains=function(a){return m.location.hash&&-1<m.location.hash.indexOf(a)};b.getInitialTab=function(c){a.debug("Setting initial tab based on previous search, will default to "+c);var d=h.parseHashParameters(),e=d.partFinderOption;angular.isDefined(e)&&!isNaN(parseFloat(e))&&isFinite(e)&&(c=parseFloat(e),a.debug("Initial tab being overwritten by URL parameter, will now default to "+
c));e=d["wildcard-part_number"]||d["wildcardspecial-part_number"]||d.part_number;if(angular.isDefined(d.fitment_id))return 1;if(angular.isDefined(d.engine_spec_search)||angular.isDefined(d.engine_search))return 5;if(angular.isDefined(e))return 4;-1===b.tabsToDisplay.indexOf(c)&&(c=b.tabsToDisplay[0],a.debug("Initial tab doesn't exist, will default to "+c));g(function(){b.selectTab(c)},0);return c};b.setAvailableTabs=function(c){var d=[];angular.forEach(c,function(b){try{d.push(parseInt(b,10))}catch(p){a.error("Could not parse",
b,"into a number")}});a.debug("Tabs to display will be: ",d);b.tabsToDisplay=d};b.setEngineRedirectURL=function(a){b.engineRedirectURL=a};b.tabVisible=function(a){return-1<b.tabsToDisplay.indexOf(a)};b.isMoreThanOneTab=function(){return 1<b.tabsToDisplay.length};b.selectTab=function(c){a.debug("Selecting tab: ",c);b.$broadcast("tabSelected",c);b.selectedTab=c;b.mobileSelectedTab=c;b.tabSelected(5)&&void 0!==b.engineRedirectURL&&0<b.engineRedirectURL.trim().length&&(m.location.href=b.engineRedirectURL)};
b.tabSelected=function(a){return b.selectedTab+""===a+""};b.mobileTabSelected=function(a){return b.mobileSelectedTab+""===a+""};b.selectSuperTab=function(a,c,d){b.selectedSuperTab===a?(b.selectedSuperTab=null,b.yourSelectionTabIsActive=null):(b.selectedSuperTab=a,b.yourSelectionTabIsActive=c,angular.isDefined(d)&&g(function(){f.to($(d.target))},5))};b.superTabSelected=function(a){return"pf"===a&&void 0===b.selectedSuperTab?!0:b.selectedSuperTab===a};b.selectStartingTab=function(){d("fitment_id")||
d("engine_id")||d("axle_id")||d("part_number")?b.selectSuperTab("yt",!0):b.onlyShowPartFinder=!0};var e=b.$on("changeFinderOption",function(c,e){a.info("Selecting tab: ",e);b.selectTab(e);d("fitment_id")||d("engine_id")||d("axle_id")||d("part_number")?b.selectSuperTab("yt",!0):(b.onlyShowPartFinder=!0,b.yourSelectionTabIsActive=!1)});b.$on("$destroy",function(){e()})}])})();
(function(){window.fmmp.partfinder.ng.controller("AxleSearchController",["$log","$scope","ApiUtilitiesService","util","$timeout",function(a,c,b,g,h){c.submitForm=function(m){a.debug("Submitting axle form");c.existingFilters=b.getExistingFilters("axle",g.parseHashParameters());h(function(){var a=[];angular.forEach($(m.currentTarget).serializeArray(),function(b){b&&b.name&&":cq_csrf_token"!==b.name&&a.push(b)});window.location.href=c.searchUrl+"#"+$.param(a)},0)};c.setSearchUrl=function(a){a=a.replace(/\/$/,
"");/\.html$/.test(a)||(a+=".html");c.searchUrl=a}}])})();
(function(){window.fmmp.partfinder.ng.controller("EngineSearchController",["$log","$scope","$location","util","EngineService","cachetypeahead","createMatchStyler","ApiUtilitiesService","$timeout","$window","$q",function(a,c,b,g,h,m,f,d,e,l,k){var q=f(),p=/[^a-z0-9\u00C0-\u017F]/ig,n=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];c.push({label:q(e,a),value:e})}return c},r=function(a){var b=(new SearchMessage).searchRepresentation(),d=c.make;a=a||"";d=d||"";var e={};d&&""!==d&&(e.make=[d]);
a&&""!==a&&(e["wildcardspecial-code_or_tecdoc_id"]=t(a));b.filters=[{engineTerms:e}];return w(b)},x=m(r,!0,p),w=function(a){var b=k.defer();h.getMultiFacets(["code","tecdoc_id"],a).then(function(a){for(var c=[],d=0;d<a.length;d++)c[d]=a[d].code+" - "+a[d].tecdoc_id;b.resolve(c)});return b.promise},y=function(){var a=(new SearchMessage).searchRepresentation();return h.getFacets("make",a)};c.initForm=function(){var a=g.parseHashParameters();c.make=angular.isDefined(a.make)?decodeURIComponent(a.make).split("+").join(" "):
void 0;c.code_or_tecdoc_id=angular.isDefined(a.code_or_tecdoc_id)?decodeURIComponent(a.code_or_tecdoc_id).split("+").join(" "):void 0;c.engine_id=angular.isDefined(a.engine_id)?decodeURIComponent(a.engine_id).split("+").join(" "):void 0;y().then(function(a){c.makes=a})};c.setSearchUrl=function(a){a=a.replace(/\/$/,"");/\.html$/.test(a)||(a+=".html");c.searchUrl=a};c.submitForm=function(a){c.existingFilters=d.getExistingFilters("engine",g.parseHashParameters());e(function(){var b=[];angular.forEach($(a.currentTarget).serializeArray(),
function(a){a&&a.name&&":cq_csrf_token"!==a.name&&b.push(a)});l.location.href=c.searchUrl+"#"+$.param(b)},0)};var A=function(a){if(a){var b=new SearchMessage;b.filters=[{engineTerms:a}];h.search(b).then(function(a){a&&a.data&&1===a.data.length?(c.showUnknownEngine=!1,c.showTooManyEngines=!1,c.engine_id=a.data[0].engine_id,c.make=a.data[0].make):(a&&a.data&&1<a.data.length?c.showTooManyEngines=!0:c.showUnknownEngine=!0,c.engine_id=void 0)},function(){c.showUnknownEngine=!0;c.engine_id=void 0})}};a=
function(a,b){c.showUnknownEngine=!1;c.showTooManyEngines=!1;c.$apply(function(){var d={};c.make&&(d.make=[c.make]);if(b&&b.item&&b.item.value){var e=b.item.value.split("-");c.engine_id=e[e.length-1].trim();d.code_or_tecdoc_id=c.engine_id;c.showUnknownEngine=!1;c.showTooManyEngines=!1}else c.engine_id=null,(e=$(a.target).val())&&""!==e&&(d.code_or_tecdoc_id=t(e)),d.code_or_tecdoc_id&&A(d);c.submitSelected=!0})};b=function(a,b){c.showUnknownEngine=!1;c.showTooManyEngines=!1;c.$apply(function(){var d=
{};c.code_or_tecdoc_id&&""!==c.code_or_tecdoc_id&&(d.code_or_tecdoc_id=t(c.code_or_tecdoc_id));if(b&&b.item&&b.item.value)c.showUnknownEngine=!1,c.showTooManyEngines=!1,d.make=[b.item.value],c.make=b.item.value;else{var e=$(a.target).val();e&&""!==e&&(d.make=[e]);c.make=$(a.target).val()}d.code_or_tecdoc_id&&A(d);c.submitSelected=!0})};c.engineCodeSearchOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:250,onlySelectValid:!0,source:function(a,b){(c.make&&""!==c.make||c.code_or_tecdoc_id&&2<=
c.code_or_tecdoc_id.length)&&x(c.code_or_tecdoc_id).then(function(a){b(n(c.code_or_tecdoc_id,a))})}},events:{change:a,select:a}};var u=function(a,b){var c=g.constructDiacriticMatcher(b,"[^a-z0-9\u00c0-\u017f]*");return $.grep(a,function(a){return c.test(a)})};c.engineMakeSearchOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:0,onlySelectValid:!0,source:function(a,b){a=u(c.makes,c.make);b(n(c.make,a))}},events:{change:b,select:b}};var B=c.$watch("make",function(a,b){x=m(r,!0,p)});c.$on("$destroy",
function(){B()});c.initForm();var t=function(a){a=a.split(" - ");a=1<a.length?a[a.length-1]:a[0];return[a]}}])})();(function(){window.fmmp.partfinder.ng.controller("EngineAdvancedSearchController",["$log","$scope","$location","util","EngineService","ApiUtilitiesService","$timeout",function(a,c,b,g,h,m,f){}])})();
(function(){window.fmmp.partfinder.ng.controller("LicensePlateSearchController",["$log","$scope","PlateService","ApiUtilitiesService","util","$timeout","$window",function(a,c,b,g,h,m,f){c.multiFitments=!1;c.selectedEngine=0;c.fitment=null;c.plateChanged=!1;var d=/^[A-Za-z]{2}[0-9]{3}[A-Za-z]{2}$/,e=/^[0-9]{1,4}[A-Z]{1,3}[0-9]{1,2}[0-9A-Z]{1}$/,l=/^[0-9]{1,2}[0-9A-Z]{1}[A-Z]{1,3}[0-9]{4}$/;c.validateAndConvertPlate=function(){var b=c.license_plate;b=b.toUpperCase().replace(/[^A-Z0-9]/g,"");a.debug("Plate after removing special chars:",
b);if(e.test(b)){a.debug("Old plate need formatting");b=b.match(/\d+|[A-Z]+/ig);switch(b[0].length){case 1:b[0]="000"+b[0];break;case 2:b[0]="00"+b[0];break;case 3:b[0]="0"+b[0]}4==b.length&&(b[2]=b.slice(2).join(""),b.splice(-1,1));c.license_plate=b.reverse().join("");a.debug("Plate after conversion:"+c.license_plate)}else l.test(b)?(a.debug("Old plate already formatted"),c.license_plate=b):d.test(b)?(a.debug("New format plate"),c.license_plate=b):(a.debug("Wrong format for plate"),c.plateWrongFormat=
!0)};c.canSearch=function(){return c.multiFitments?angular.isDefined(c.license_plate)&&angular.isDefined(c.variant)&&"0"!=c.variant&&angular.isDefined(c.plate_engine_selector)&&"0"!=c.plate_engine_selector:angular.isDefined(c.license_plate)};c.searchPlateFitments=function(){var d=c.license_plate;a.debug("Searching for: "+d);var e=[],f=[];c.variants=[c.loadingMsg];c.variant=c.loadingMsg;c.plate_engines=void 0;b.search(d).then(function(b){f=b.data;c.plateChanged=!1;c.fitments=f;a.debug("Found: ",f);
c.multiFitments=0!==f.length&&1<f.length;c.multiFitments?($.each(f,function(a,b){var c=!1;e&&e.length&&$.each(e,function(a,d){if(d===b.variant)return c=!0,!1});c||e.push(b.variant)}),c.variants=e,1===e.length?(c.variant=e[0],c.fitment=c.fitments[0],c.setEngines()):c.variant="0"):(c.fitment_id=f[0].fitment_id,k())}).catch(function(a){c.plateNotFound=!0;c.variants=void 0;c.plate_engines=void 0;c.variant=void 0;c.plate_engine_selector=void 0})};c.setEngines=function(){var a=c.variant;if(!a)return!1;
c.plate_engines=[{engine_display:c.loadingMsg,fitment_id:0}];c.plate_engine_selector=0;var b=[];$.each(c.fitments,function(d,e){if(e.variant===a){var f=!1;c.fitment=e;b&&b.length&&$.each(b,function(a,b){if(b.engine_display===e.engine_display)return f=!0,!1});f||b.push(e)}});c.plate_engines=b;1===b.length&&(c.fitment_id=c.fitment.fitment_id,c.plate_engine_selector=""+c.fitment.fitment_id)};c.submitPlateLookup=function(){c.plateNotFound=!1;!c.plateChanged&&c.multiFitments&&angular.isDefined(c.license_plate)&&
angular.isDefined(c.variant)&&"0"!=c.variant&&angular.isDefined(c.plate_engine_selector)&&"0"!=c.plate_engine_selector?k():c.plateChanged&&"fr_FR"==g.getLocale()?(c.validateAndConvertPlate(),a.debug("$scope.plateWrongFormat:"+c.plateWrongFormat),0==c.plateWrongFormat&&c.searchPlateFitments()):c.searchPlateFitments()};var k=function(){c.existingFilters=g.getExistingFilters("vehicle",h.parseHashParameters());m(function(){var a=$("form[name\x3d'plateFitmentSearch']").serializeArray();f.location.href=
c.searchUrl+"#"+$.param(a)},0)};c.setLoadingMessage=function(a){c.loadingMsg=a};c.setSearchUrl=function(a){a=a.replace(/\/$/,"");/\.html$/.test(a)||(a+=".html");c.searchUrl=a};c.setFitmentId=function(){c.fitment_id=c.plate_engine_selector}}])})();
(function(){angular.module("fmmp.partfindervehicle",["ngCookies"]).controller("PartFinderVehicleController",["$log","$element","$scope","$cookieStore","PartFinderHistoryService","$timeout","ApiUtilitiesService","$window","util",function(a,c,b,g,h,m,f,d,e){h.getFitments().then(function(a){b.historyFitments=a});b.setSearchUrl=function(a){a=a.replace(/\/$/,"");/\.html$/.test(a)||(a+=".html");b.searchUrl=a};b.submitForm=function(a){b.existingFilters=f.getExistingFilters("vehicle",e.parseHashParameters());
m(function(){var c=[];angular.forEach($(a.currentTarget).serializeArray(),function(a){a&&a.name&&":cq_csrf_token"!==a.name&&c.push(a)});d.location.href=b.searchUrl+"#"+$.param(c)},0)};b.$watch("[yourSelectionTabIsActive,historyFitments.length]",function(a,c){if(!a[0]&&1<=a[1]){var d=2;c=$(".part-finder-by-vehicle-carousel");1==a[1]?(d=1,c.addClass("slide-one")):2==a[1]?c.addClass("slide-two"):c.addClass("slide-more");b.showCarousel=!0;m(function(){$(".part-finder-by-vehicle-carousel").slick({slidesToShow:d,
slidesToScroll:d,responsive:[{breakpoint:640,settings:{slidesToShow:1,slidesToScroll:1}}]})},0)}},!0)}])})();
(function(){window.fmmp.partfinder.ng.controller("PartNumberSearchController",["$log","$scope","$q","$location","util","PartService","InterchangeService","cachetypeahead","createMatchStyler","ApiUtilitiesService","$timeout","$window",function(a,c,b,g,h,m,f,d,e,l,k,q){var p=/[^a-z0-9\u00C0-\u017F]/ig,n=d(function(c){var d=b.defer();b.all([w(c),x(c)]).then(function(b){b=h.zipperMerge(b[0],b[1]);a.debug("Combined results: ",b);d.resolve(b)});return d.promise},!0,p),r=e(),x=function(a){var b=new SearchMessage;
b.filters=[{interchangeTerms:{"wildcardspecial-referenced_part_number":[a]}}];l.setEnforcedBrand(b)||c.searchOpts.brands&&0<c.searchOpts.brands.length&&b.filters.push({partTerms:{brand_id:c.searchOpts.brands}});return f.getFacets("referenced_part_number",b)},w=function(a){var b=new SearchMessage;a={partTerms:{"wildcardspecial-part_number":[a]}};!l.setEnforcedBrand(b)&&c.searchOpts.brands&&0<c.searchOpts.brands.length&&(a.partTerms.brand_id=c.searchOpts.brands);b.filters=[a];return m.getFacets("part_number",
b)};c.initForm=function(){var a=h.parseHashParameters();a=a["wildcard-part_number"]||a["wildcardspecial-part_number"]||a.part_number;c.part_number=angular.isDefined(a)?decodeURIComponent(a).split("+").join(" "):void 0};c.setSearchUrl=function(a){a=a.replace(/\/$/,"");/\.html$/.test(a)||(a+=".html");c.searchUrl=a};c.submitForm=function(b){a.debug("Submitting part form");c.existingFilters=l.getExistingFilters("part",h.parseHashParameters());k(function(){var a=[];angular.forEach($(b.currentTarget).serializeArray(),
function(b){b&&b.name&&":cq_csrf_token"!==b.name&&a.push(b)});q.location.href=c.searchUrl+"#"+$.param(a)},0)};c.partNumberOptions={options:{html:!0,minLength:3,delay:250,onlySelectValid:!1,source:function(a,b){n(a.term).then(function(c){for(var d=a.term,e=[],f=0;f<c.length;f++){var k=c[f];e.push({label:r(k,d),value:k})}b(e)})}},events:{search:function(b,d){d=c.part_number.replace(p,"");d.length<c.partNumberOptions.options.minLength&&(a.debug("Part number after replace: ",d),b.preventDefault())},change:function(a,
b){c.submitSelected=!0}}};c.searchOpts={};c.initForm()}])})();
(function(){window.fmmp.partfinder.ng.controller("VehicleTypeSearchController",["$scope","$log","$q","$location","util","$filter","$compile","FitmentService","createMatchStyler","ApiUtilitiesService","$timeout","$window","$element",function(a,c,b,g,h,m,f,d,e,l,k,q,p){a.isIos=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;var n=function(a,b){return d.getFacets(a,b)},r=function(a,b){b=b||{};var c=new SearchMessage;c.addFilter({fitmentTerms:a});b.restrictToFitmentsWithParts&&(c.addFilter({fitmentTerms:{"wildcard-part_id":[""]}}),
c.addFilter({partTerms:{active:["true"]}}),l.setEnforcedBrand(c));return c};a.makes=[];a.models=[];a.variants=[];a.engines=[];a.smallEngineMakes=[];a.smallEngineModels=[];a.smallEngineTypes=[];a.smallEngineEngines=[];a.smallEngineCCs=[];a.loadingMsg="";a.originalLoadingMsg="";var x=e(),w=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];c.push({label:x(e,a),value:e})}return c};a.vehicleCategorySelected=function(b){var c=!1;angular.forEach(b,function(b){a.vehicle_category===b&&(c=!0)});return c};
a.setInitialVehicleCategory=function(b){a.vehicle_category=b;a.initForm();k(function(){u();p.find('select[ng-model\x3d"vehicle_category"]').val(a.vehicle_category).prop("selected",!0)},0)};var y=function(a,b){var c=Util.constructDiacriticMatcher(b,"[^a-z0-9\u00c0-\u017f]*");return $.grep(a,function(a){return c.test($("\x3cdiv\x3e").html(a.label||a.value||a).text())})};a.initForm=function(){var e=h.parseHashParameters();a.fitment_id=void 0;a.make=void 0;a.model=void 0;a.variant=void 0;a.engine_selector=
void 0;a.engine_display=void 0;a.smallEngineMake=void 0;a.smallEngineModel=void 0;a.smallEngineType=void 0;a.smallEngineEngine=void 0;a.smallEngineCC=void 0;a.smallEngineModelSelected=!1;a.smallEngineTypeSelected=!1;a.smallEngineEngineSelected=!1;a.smallEngineCCSelected=!1;a.setFormPristine();if(angular.isDefined(e.fitment_id)){var f=r({fitment_id:[e.fitment_id]});d.search(f).then(function(d){if(d.data&&0<d.data.length){var f=d.data[0];a.vehicle_category=f.vehicle_category;a.make=f.make;a.model=f.simple_model;
a.variant=f.variant;a.smallEngineMake=f.make;a.smallEngineModel=f.simple_model;a.smallEngineType=f.variant;a.smallEngineEngine=f.engine_display;a.smallEngineCC=f.cc_tech}b.all([n("make",a.createMakesMessage()).then(function(b){a.makes=b;a.smallEngineMakes=b}),n("simple_model",a.createModelsMessage()).then(function(b){c.info(b);a.models=b;a.smallEngineModels=b;a.smallEngineModelSelected=0===a.smallEngineModels.length?!0:!1}),n("variant",a.createVariantsMessage()).then(function(b){a.variants=b;a.smallEngineTypes=
b;a.smallEngineTypeSelected=0===a.smallEngineTypes.length?!0:!1}),n("engine_display,fitment_id",a.createEnginesMessage()).then(function(b){a.engineFitments=b;var c=[];angular.forEach(b,function(a){!a.engine_display||0<=c.indexOf(a.engine_display)||c.push(a.engine_display)});a.engines=c;b=m("filter")(a.engineFitments,{fitment_id:e.fitment_id},!0);b.length&&(a.engine_selector=b[0].engine_display,a.setEngineFields())}),n("engine_display",a.createEnginesMessage()).then(function(b){a.smallEngineEngines=
b;a.smallEngineEngineSelected=0===a.smallEngineEngines.length?!0:!1}),n("cc_tech",a.createCCsMessage()).then(function(b){a.smallEngineCCs=b;a.smallEngineCCSelected=0===a.smallEngineCCs.length?!0:!1})]).finally(function(){f&&k(function(){a.smallEngineMake=f.make;a.smallEngineModel=f.simple_model;a.smallEngineType=f.variant;a.smallEngineEngine=f.engine_display;a.smallEngineCC=f.cc_tech},0);a.initializing=!1})})}else a.getMakes(),a.initializing=!1};a.setSearchUrl=function(b){b=b.replace(/\/$/,"");/\.html$/.test(b)||
(b+=".html");a.searchUrl=b};a.submitForm=function(b){a.existingFilters=l.getExistingFilters("vehicle",h.parseHashParameters());k(function(){if(a.validateForm()){var d=$(b.currentTarget).serializeArray();c.debug("Form passed validation, submitting");a.smallEngineSelected()?n("fitment_id",a.createFullSmallEnginesMessage()).then(function(b){c.debug("Before submitting small engines form, found fitments "+b);if(0<b.length)for(var e=0;e<d.length;e++)if("fitment_id"===d[e].name){d[e].value=b[0];break}c.debug("Submitting "+
JSON.stringify(d));a.doSubmit(d)}):a.doSubmit(d)}},0)};a.doSubmit=function(b){var c=[];angular.forEach(b,function(a){a&&a.name&&":cq_csrf_token"!==a.name&&c.push(a)});q.location.href=a.searchUrl+"#"+$.param(c)};a.validateForm=function(){return a.variantLoading||a.ccLoading||a.makeLoading||a.modelLoading||a.engineLoading?!1:"AGRICULTURAL"===a.vehicle_category||"COMMERCIAL"===a.vehicle_category||"MARINE"===a.vehicle_category||"SMALL ENGINE"===a.vehicle_category?angular.isDefined(a.vehicle_category)&&
angular.isDefined(a.smallEngineMake)&&(angular.isDefined(a.smallEngineModel)||a.smallEngineModelSelected)&&(angular.isDefined(a.smallEngineType)||a.smallEngineTypeSelected)&&(angular.isDefined(a.smallEngineEngine)||a.smallEngineEngineSelected):"ATV"===a.vehicle_category||"MC"===a.vehicle_category||"SNOWMOBILE"===a.vehicle_category?angular.isDefined(a.vehicle_category)&&angular.isDefined(a.smallEngineMake)&&(angular.isDefined(a.smallEngineModel)||a.smallEngineModelSelected)&&(angular.isDefined(a.smallEngineCC)||
a.smallEngineCCSelected):angular.isDefined(a.vehicle_category)&&angular.isDefined(a.make)&&angular.isDefined(a.model)&&angular.isDefined(a.variant)&&angular.isDefined(a.engine_selector)};a.setFormPristine=function(){a.vehicleTypeForm&&a.vehicleTypeForm.$setPristine()};a.makeSelectOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:0,onlySelectValid:!0,source:function(b,c){var d=y(a.makes,b.term);c(w(b.term,d))}},events:{change:function(b,c){a.model=void 0;a.variant=void 0;a.engine_selector=void 0;
a.submitSelected=!0;a.getModels()}}};a.modelSelectOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:0,onlySelectValid:!0,source:function(b,c){var d=y(a.models,b.term);c(w(b.term,d))}},events:{change:function(b,c){a.variant=void 0;a.engine_selector=void 0;a.submitSelected=!0;a.loadVariants()}}};a.getMakes=function(){a.makeLoading=!0;n("make",a.createMakesMessage()).then(function(b){a.makes=b;a.smallEngineMakes=b;a.makeLoading=!1;$(".part-finder-selected-vehicle #makeLoading").filter(":visible").is(":focus")&&
k(function(){$(".part-finder-selected-vehicle #make").filter(":visible").focus().autocomplete("search","")},0)})};a.getModels=function(){a.models=null;a.smallEngineModels=null;a.modelLoading=!0;n("simple_model",a.createModelsMessage()).then(function(b){a.models=b;a.model=void 0;a.smallEngineModels=b;a.smallEngineSelected()?0===a.smallEngineModels.length?(a.smallEngineModelSelected=!0,a.smallEngineModel=void 0):angular.isDefined(a.smallEngineModel)||(a.smallEngineModelSelected=!1):(a.modelsFocused=
!0,1===a.models.length&&(a.model=a.models[0],a.modelSelectOptions.events.change()));a.modelLoading=!1;$(".part-finder-selected-vehicle #modelLoading").filter(":visible").is(":focus")&&k(function(){$(".part-finder-selected-vehicle #model").filter(":visible").focus().autocomplete("search","")},0)})};a.loadVariants=function(){a.variants=null;a.variant=null;a.smallEngineTypes=null;a.variantLoading=!0;n("variant",a.createVariantsMessage()).then(function(b){a.variants=b;a.variant=void 0;a.smallEngineTypes=
b;a.smallEngineSelected()?0===a.smallEngineTypes.length?(a.smallEngineTypeSelected=!0,a.smallEngineType=void 0):angular.isDefined(a.smallEngineType)||(a.smallEngineTypeSelected=!1):(a.variantsFocused=!0,1===a.variants.length&&(a.variant=a.variants[0],a.loadEngines()));a.variantLoading=!1;$(".part-finder-selected-vehicle #variantLoading").filter(":visible").is(":focus")?k(function(){$(".part-finder-selected-vehicle #variant").filter(":visible").focus()},0):$(".part-finder-selected-vehicle #smallEngineTypeLoading").filter(":visible").is(":focus")&&
k(function(){$(".part-finder-selected-vehicle #smallEngineType").filter(":visible").focus().autocomplete("search","")},0)})};a.loadEngines=function(){a.engines=null;a.engine_selector=null;a.engineLoading=!0;n("engine_display,fitment_id",a.createEnginesMessage()).then(function(b){a.engine_selector=void 0;a.engineFitments=b;var c=[];angular.forEach(b,function(a){!a.engine_display||0<=c.indexOf(a.engine_display)||c.push(a.engine_display)});a.engines=c;a.smallEngineEngines=c;a.smallEngineSelected()?0===
a.smallEngineEngines.length?(a.smallEngineEngineSelected=!0,a.smallEngineEngine=void 0):angular.isDefined(a.smallEngineEngine)||(a.smallEngineEngineSelected=!1):(a.enginesFocused=!0,1===a.engines.length&&(a.engine_selector=a.engines[0],a.setEngineFields()));a.submitSelected=!0;a.engineLoading=!1;$(".part-finder-selected-vehicle #engineLoading").filter(":visible").is(":focus")?k(function(){$(".part-finder-selected-vehicle #engine_selector").filter(":visible").focus()},0):$(".part-finder-selected-vehicle #smallEngineEngineLoading").filter(":visible").is(":focus")&&
k(function(){$(".part-finder-selected-vehicle #smallEngineEngine").filter(":visible").focus().autocomplete("search","")},0)})};a.getCCs=function(){a.ccLoading=!0;n("cc_tech",a.createCCsMessage()).then(function(b){a.smallEngineCCs=b;0===a.smallEngineCCs.length?(a.smallEngineCCSelected=!0,a.smallEngineCC=void 0):angular.isDefined(a.smallEngineCC)||(a.smallEngineCCSelected=!1);$(".part-finder-selected-vehicle #smallEngineCCLoading").filter(":visible").is(":focus")&&$(".part-finder-selected-vehicle #smallEngineCC").filter(":visible").focus().autocomplete("search",
"");a.ccLoading=!1})};a.setEngineFields=function(){var b={};angular.forEach(a.engineFitments,function(c){c.engine_display===a.engine_selector&&(b=c)});a.engine_display=b.engine_display;a.fitment_id=b.fitment_id;a.submitSelected=!0};a.createMakesMessage=function(){return r({vehicle_category:[a.vehicle_category]},{restrictToFitmentsWithParts:!0})};a.createModelsMessage=function(){var b={vehicle_category:[a.vehicle_category]},c=0;a.smallEngineSelected()?(b.make=[a.smallEngineMake],a.smallEngineType&&
(b.variant=[a.smallEngineType]),a.smallEngineEngine&&(b.engine_display=[a.smallEngineEngine],c++),a.smallEngineCC&&(b.cc_tech=[a.smallEngineCC],c++)):b.make=[a.make];return r(b,{restrictToFitmentsWithParts:0==c})};a.createVariantsMessage=function(){var b={vehicle_category:[a.vehicle_category]},c=0;a.smallEngineSelected()?(b.make=[a.smallEngineMake],a.smallEngineModel&&(b.simple_model=[a.smallEngineModel],c++),a.smallEngineEngine&&(b.engine_display=[a.smallEngineEngine],c++),a.smallEngineCC&&(b.cc_tech=
[a.smallEngineCC],c++)):(b.make=[a.make],b.simple_model=[a.model],c++);return r(b,{restrictToFitmentsWithParts:0==c})};a.createEnginesMessage=function(){var b={vehicle_category:[a.vehicle_category]},c=0;a.smallEngineSelected()?(b.make=[a.smallEngineMake],a.smallEngineModel&&(b.simple_model=[a.smallEngineModel],c++),a.smallEngineType&&(b.variant=[a.smallEngineType]),a.smallEngineCC&&(b.cc_tech=[a.smallEngineCC],c++)):(b.make=[a.make],b.simple_model=[a.model],c++,b.variant=[a.variant],c++);return r(b,
{restrictToFitmentsWithParts:0==c})};a.createCCsMessage=function(){var b={vehicle_category:[a.vehicle_category]},c=0;a.smallEngineSelected()&&(b.make=[a.smallEngineMake],a.smallEngineModel&&(b.simple_model=[a.smallEngineModel],c++),a.smallEngineType&&(b.variant=[a.smallEngineType]),a.smallEngineEngine&&(b.engine_display=[a.smallEngineEngine],c++));return r(b,{restrictToFitmentsWithParts:0==c})};a.createFullSmallEnginesMessage=function(){var b={vehicle_category:[a.vehicle_category]},c=0;a.smallEngineSelected()&&
(b.make=[a.smallEngineMake],a.smallEngineModel&&(b.simple_model=[a.smallEngineModel],c++),a.smallEngineType&&(b.variant=[a.smallEngineType]),a.smallEngineEngine&&(b.engine_display=[a.smallEngineEngine],c++),a.smallEngineCC&&(b.cc_tech=[a.smallEngineCC],c++));return r(b,{restrictToFitmentsWithParts:1>=c})};var A=function(){},u=function(){A=a.$watch("vehicle_category",function(b,c){b&&(c?b!==c:1)&&(a.make=void 0,a.model=void 0,a.variant=void 0,a.engine_selector=void 0,a.smallEngineMake=void 0,a.smallEngineModel=
void 0,a.smallEngineType=void 0,a.smallEngineEngine=void 0,a.smallEngineCC=void 0,a.smallEngineModelSelected=void 0,a.smallEngineTypeSelected=void 0,a.smallEngineEngineSelected=void 0,a.smallEngineCCSelected=void 0,a.setFormPristine(),a.getMakes())})};a.$on("$destroy",function(){A()});a.smallEngineSelected=function(){return"AGRICULTURAL"===a.vehicle_category||"COMMERCIAL"===a.vehicle_category||"MARINE"===a.vehicle_category||"SMALL ENGINE"===a.vehicle_category||"ATV"===a.vehicle_category||"MC"===a.vehicle_category||
"SNOWMOBILE"===a.vehicle_category};a.smallEngineMakeSelectOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:0,onlySelectValid:!0,source:function(b,c){var d=y(a.smallEngineMakes,b.term);c(w(b.term,d))}},events:{change:function(b,c){a.smallEngineModel=void 0;a.smallEngineType=void 0;a.smallEngineEngine=void 0;a.smallEngineCC=void 0;a.smallEngineModelSelected=!1;a.smallEngineTypeSelected=!1;a.smallEngineEngineSelected=!1;a.smallEngineCCSelected=!1;a.submitSelected=!0;a.getModels();a.loadVariants();
a.loadEngines();a.getCCs()}}};a.smallEngineModelSelectOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:0,onlySelectValid:!0,source:function(b,c){k(function(){var d=y(a.smallEngineModels,b.term);c(w(b.term,d))},0)}},events:{change:function(b,c){a.submitSelected=!0;a.loadVariants();a.loadEngines();a.getCCs()}}};a.smallEngineTypeSelectOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:0,onlySelectValid:!0,source:function(b,c){k(function(){var d=y(a.smallEngineTypes,b.term);c(w(b.term,d))},
0)}},events:{change:function(b,c){a.submitSelected=!0;a.getModels();a.loadEngines();a.getCCs()}}};a.smallEngineEngineSelectOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:0,onlySelectValid:!0,source:function(b,c){k(function(){var d=y(a.smallEngineEngines,b.term);c(w(b.term,d))},0)}},events:{change:function(b,c){a.submitSelected=!0;a.getModels();a.loadVariants();a.getCCs()}}};a.smallEngineCCSelectOptions={options:{html:!0,focusOpen:!0,minLength:0,delay:0,onlySelectValid:!0,source:function(b,
c){k(function(){var d=y(a.smallEngineCCs,b.term);c(w(b.term,d))},0)}},events:{change:function(b,c){a.submitSelected=!0;a.getModels();a.loadVariants();a.loadEngines()}}};a.setLoadingMessage=function(b){c.info("Setting loading message to : ",b);a.loadingMsg=b;a.originalLoadingMsg=b};a.$watch("loadingMsg",function(b,c){a.loadingMsg!==a.originalLoadingMsg&&(a.loadingMsg=a.originalLoadingMsg)})}])})();
(function(){window.fmmp.partfinder.ng.controller("VinSearchController",["$log","$scope","VinService","ApiUtilitiesService","util","$window","$timeout",function(a,c,b,g,h,m,f){c.multiFitments=!1;c.selectedEngine=0;c.fitment=null;c.vinChanged=!1;c.canSearch=function(){var a=c.vin;return c.vinChanged&&void 0!==a&&17!=a.length&&0!=a.length?(c.badVinFormat=!1,!0):c.multiFitments?angular.isDefined(c.vin)&&angular.isDefined(c.variant)&&"0"!=c.variant&&angular.isDefined(c.vin_engine_selector)&&"0"!=c.vin_engine_selector:
angular.isDefined(c.vin)};c.searchVinFitments=function(){var e=c.vin;a.debug("Searching for: "+e);var f=[],k=[];c.variants=[c.loadingMsg];c.variant=c.loadingMsg;c.vin_engines=void 0;b.search(e).then(function(b){k=b.data;c.vinChanged=!1;c.fitments=k;a.debug("Found: ",k);c.multiFitments=0!==k.length&&1<k.length;c.multiFitments?($.each(k,function(a,b){var c=!1;f&&f.length&&$.each(f,function(a,d){if(d===b.variant)return c=!0,!1});c||f.push(b.variant)}),c.variants=f,1===f.length?(c.variant=f[0],c.fitment=
c.fitments[0],c.setEngines()):c.variant="0"):(c.fitment_id=k[0].fitment_id,d())}).catch(function(a){c.vinNotFound=!0;c.variants=void 0;c.vin_engines=void 0;c.variant=void 0;c.vin_engine_selector=void 0})};c.setEngines=function(){var a=c.variant;if(!a)return!1;c.vin_engines=[{engine_display:c.loadingMsg,fitment_id:0}];c.vin_engine_selector=0;var b=[];$.each(c.fitments,function(d,e){if(e.variant===a){var f=!1;c.fitment=e;b&&b.length&&$.each(b,function(a,b){if(b.engine_display===e.engine_display)return f=
!0,!1});f||b.push(e)}});c.vin_engines=b;1===b.length&&(c.fitment_id=c.fitment.fitment_id,c.vin_engine_selector=""+c.fitment.fitment_id)};c.submitVinLookup=function(){c.vinNotFound=!1;!c.vinChanged&&c.multiFitments&&angular.isDefined(c.vin)&&angular.isDefined(c.variant)&&"0"!=c.variant&&angular.isDefined(c.vin_engine_selector)&&"0"!=c.vin_engine_selector?d():c.searchVinFitments()};c.setFitmentId=function(){c.fitment_id=c.vin_engine_selector};var d=function(){c.existingFilters=g.getExistingFilters("vehicle",
h.parseHashParameters());f(function(){var a=$("form[name\x3d'vinFitmentSearch']").serializeArray();m.location.href=c.searchUrl+"#"+$.param(a)},0)};c.setLoadingMessage=function(a){c.loadingMsg=a};c.setSearchUrl=function(a){a=a.replace(/\/$/,"");/\.html$/.test(a)||(a+=".html");c.searchUrl=a}}])})();
(function(){window.fmmp.partfinder.ng.controller("EngineDisplayController",["$log","$scope","$location","util","EngineService",function(a,c,b,g,h){c.init=function(){var a=g.parseHashParameters();if(a=angular.isDefined(a.engine_id)?decodeURIComponent(a.engine_id).split("+").join(" "):void 0){var b=new SearchMessage;b.filters=[{engineTerms:{engine_id:[a]}}];h.search(b).then(function(a){a&&a.data&&0<a.data.length&&(c.engine=a.data[0])})}};c.maxAndMin=function(a){if(a){if(0===a.length)return a[0];if(1<
a.length)return a.sort(function(a,b){return a-b}),a[0]+" - "+a[a.length-1]}};c.formatPreciseValue=function(a){return a?(a/1E3).toFixed(2):"-"}}])})();
(function(){window.fmmp.partfinder.ng.directive("tabOrder",["$log","$timeout",function(a,c){return{restrict:"A",scope:{tabOrder:"\x3d",forceFirstOption:"\x3d"},link:function(a,g){if(a.forceFirstOption){var b=parseInt(a.forceFirstOption,10);var m=[b].concat(a.tabOrder)}else m=[].concat(a.tabOrder);var f=function(){var a=$(g[0]).children("[tab-id]");a.sort(function(a,b){a=parseInt(a.getAttribute("tab-id"));b=parseInt(b.getAttribute("tab-id"));a=m.indexOf(a);b=m.indexOf(b);-1===a&&(a=999);-1===b&&(b=
999);return b-a});angular.forEach(a,function(a){$(a).parent().prepend(a)})};c(function(){f()},0)}}}])})();(function(){window.fmmp=window.fmmp||{};window.fmmp.partlist=window.fmmp.partlist||{};window.fmmp.partlist.ng=angular.module("fmmp.partlist",["fmmp.base","ngCookies","fmmp.partfinderresults"])})();
(function(){window.fmmp.partlist.ng.controller("PartListController",["$log","$element","$scope","SearchService","InterchangeSearchService","PartService","FitmentService","AxleService","EngineService","util","$sce","ApiUtilitiesService","$location","$window","urlHash","dataUtil","analytics","$timeout","scroll",function(a,c,b,g,h,m,f,d,e,l,k,q,p,n,r,x,w,y,A){function u(a){var c=[],d=0;b.params=a||b.params;h.show=!1;z=c[d++]=angular.isDefined(b.params.fitment_id);v=c[d++]=angular.isDefined(b.params.axle_id);
C=c[d++]=angular.isDefined(b.params.engine_id);(D=c[d++]=angular.isDefined(b.params["wildcard-part_number"]||b.params["wildcardspecial-part_number"]||b.params.part_number))?(b.isPartSearch=!0,b.searched_part_number=b.params["wildcard-part_number"]||b.params["wildcardspecial-part_number"]||b.params.part_number):b.isPartSearch=!1;b.plateNotFound=c[d++]=angular.isDefined(b.params.plate_not_found);b.plateSurplus=c[d++]=angular.isDefined(b.params.plate_surplus);b.plateError=c[d++]=angular.isDefined(b.params.plate_error);
b.vinNotFound=c[d++]=angular.isDefined(b.params.vin_not_found);b.vinSurplus=c[d++]=angular.isDefined(b.params.vin_surplus);b.vinError=c[d++]=angular.isDefined(b.params.vin_error);b.noPartsForFitment=function(){return z&&!E()};b.noPartsForAxle=function(){return v&&!E()};b.noPartsForEngine=function(){return C&&!E()};b.noPartsForPart=function(){return D&&!E()};0<=c.indexOf(!0)?b.noSearchCriteria=!1:b.noSearchCriteria=!0}b.SearchService=g;b.InterchangeSearchService=h;b.activeSearches=0;var B=function(){var a=
l.parseHashParameters(),b=q.getExistingFilters(a.search_type,a),c={},d;for(d in a)0===$.grep(b,function(a){return a.key===d}).length&&(c[d]=a[d]);return l.buildQueryString(c)};b.params=l.parseHashParameters();r.onHashChange(function(c,d){var e="category_id subcategory_id brand_id sub_brand_id fitment_id axle_id engine_id wildcard-part_number wildcardspecial-part_number part_number".split(" ");e=t(e,c,d);if(!e){e=[];for(var f in c)0===f.indexOf("attr")&&e.push(f);for(f in d)0===f.indexOf("attr")&&
0>e.indexOf(f)&&e.push(f);e=t(e,c,d)}e&&(a.info("hash parameter related to search has changed. Resetting to page 1"),b.savedPage=1,b.partlistpage=1,b.interchangeSavedPage=1,b.interchangelistpage=1,g.searchMessage.offset=0,g.pageUpdate(1),h.searchMessage.offset=0,h.pageUpdate(1));u(c)},b);var t=function(b,c,d){for(var e=0;e<b.length;e++){var f=b[e],k=c[f],g=d[f];if(angular.isDefined(k)&&!angular.isDefined(g)||!angular.isDefined(k)&&angular.isDefined(g)||k!==g)return a.debug(f+" changed"),!0}return!1},
z,v,C,D,F=!1,E=function(){return D?0<g.searchMessage.data.length||0<h.searchMessage.data.length:0<g.searchMessage.data.length};b.hasParts=E;b.trustPartDescription=function(a){return a?k.trustAsHtml(a.description):""};b.gotoFilterlessUrl=function(){n.location.href=p.protocol()+"://"+p.host()+":"+p.port()+p.path()+"#"+B();b.overrideHasFilters=!0};b.hasExistingFilters=function(){return b.overrideHasFilters||q.hasExistingFilters(l.parseHashParameters())};var J=function(){if(angular.isDefined(b.params.fitment_id)){var c=
new SearchMessage;c.addFilter({fitmentTerms:{fitment_id:[b.params.fitment_id]}});f.search(c).then(function(a){a=a.data[0];b.fitsDisplay=a.make;b.fitsEngineDisplay=null;b.axle_code=null;a.model?b.fitsDisplay+=" "+a.model:a.variant&&(b.fitsDisplay+=" "+a.variant)},function(b){a.error(b)})}else angular.isDefined(b.params.axle_id)?(c=new SearchMessage,c.addFilter({axleTerms:{axle_id:[b.params.axle_id]}}),d.search(c).then(function(a){b.axle_code=a.data[0].type;b.fitsDisplay=null;b.fitsEngineDisplay=null},
function(b){a.error(b)})):angular.isDefined(b.params.engine_id)&&(c=new SearchMessage,c.addFilter({engineTerms:{engine_id:[b.params.engine_id]}}),e.search(c).then(function(a){a=a.data[0];b.engine_id=a.engine_id;b.fitsEngineDisplay=a.code;b.fitsDisplay=null;b.axle_code=null},function(b){a.error(b)}))};b.savedPage=1;b.partlistpage=1;b.interchangeSavedPage=1;b.interchangelistpage=1;b.pageUpdate=function(a){h.show?a=h.pageUpdate(a):a=g.pageUpdate(a);""!==a&&(h.show?b.interchangeSavedPage=a:b.partsSavedPage=
a);h.show?b.interchangelistpage=a:b.partlistpage=a};b.updateShowInterchange=function(a){0<g.searchMessage.data.length&&a&&(h.show=!1);0<h.searchMessage.data.length&&!a&&(h.show=!0)};b.pageForce=function(){if(""===b.partlistpage||""===b.interchangelistpage)h.show?b.interchangelistpage=b.interchangeSavedPage:b.partlistpage=b.partsSavedPage};b.prevPage=function(){h.show?h.prevPage():g.prevPage();h.show?b.interchangelistpage=parseInt(b.interchangelistpage)-1:b.partlistpage=parseInt(b.partlistpage)-1;
y(function(){A.to($(".part-list-search-results"))},5)};b.nextPage=function(){h.show?h.nextPage():g.nextPage();h.show?b.interchangelistpage=parseInt(b.interchangelistpage)+1:b.partlistpage=parseInt(b.partlistpage)+1;y(function(){A.to($(".part-list-search-results"))},5)};var I=function(c){c.part_id&&(b.activeSearches+=1,m.getMetadata(c.part_id).then(function(a){--b.activeSearches;a=a.data;c.title=a.title;c.brand=a.brand;c.description=a.short_description;c.imageSrc=a.web_rendition_image;c.url=a.partdetailurl;
c.part_number=a.part_number;c.superseding_partdetail_url=a.superseding_partdetail_url;c.superseding_part_number=a.superseding_part_number;c.has_superseded_url=angular.isDefined(c.superseding_partdetail_url);b.locationHash=window.location.hash;b.noPartDescription=!1},function(d){c.description=null;b.noPartDescription=!0;c.imageSrc=null;c.title=c.name;--b.activeSearches;a.error("Could not load metadata information for part. ",d)}))},G=b.$watch("SearchService.searchMessage.data",function(a){J();angular.forEach(a,
I)}),K=b.$watch("InterchangeSearchService.searchMessage.data",function(a){angular.forEach(a,I)}),L=b.$watchGroup(["params","SearchService.searchMessage.totalResults"],function(b,c,d){if(!F)F=!0;else if(g.searchMessage.sort&&0<g.searchMessage.filters.length){var e={};z?(c=new SearchMessage,c.addFilter({fitmentTerms:{fitment_id:[b[0].fitment_id]}}),f.search(c).then(function(a){a=a.data[0];e.action="search-vehicle";e.label=(a.vehicle_category||"")+"|"+(a.make||"")+"|"+(a.model||"")+"|"+(a.variant||"")+
"|"+(a.engine_display||"");e.totalResults=g.searchMessage.totalResults;H(e)},function(b){a.error("Cannot retrieve fitment information for Google Analytics result.",b)})):D?(e.action="search-part-number",e.label=b[0]["wildcardspecial-part_number"],e.totalResults=g.searchMessage.totalResults,H(e)):C&&(e.action="search-engine",e.label=b[0].code_or_tecdoc_id,e.totalResults=g.searchMessage.totalResults,H(e));F=!1}}),H=function(a){a=a||{};"undefined"!==typeof a.action&&"undefined"!==typeof a.label&&"undefined"!==
typeof a.totalResults&&w.trackCampaignEvent("ecat","part-search",a.action,a.label,a.totalResults,{})};b.$on("$destroy",function(){G();K();M();N();O();P();L()});var M=b.$on("PartListSearchStart",function(){b.activeSearches+=1}),N=b.$on("PartListSearchComplete",function(){--b.activeSearches}),O=b.$on("PageChangeStart",function(){b.activeSearches+=1}),P=b.$on("PageChangeComplete",function(){--b.activeSearches});b.recordAnalyticsOnAction=function(a){var b=$(a.currentTarget).data("linktype"),c=$(a.currentTarget).data("linkvalue");
w.trackEvent("part-search",b,c,null,{callback:function(){var b=$(a.currentTarget).data("href");n.location.href=b}})};b.tabs={};u();b.setTab=function(a,c){b.tabs[a]=c};b.isTabSet=function(a,c){return b.tabs[a]===c};b.isSupplementaryInfoType=x.isSupplementaryInfoType}])})();
(function(){window.fmmp.partlist.ng.controller("FilterSelectionController",["$scope","$rootScope","$log","$debounce","util","PartService","SearchService","InterchangeSearchService","PartFinderHistoryService","urlHash","$q",function(a,c,b,g,h,m,f,d,e,l,k){a.filters={};a.availableFilters={};a.enforcedBrand=null;a.isBrandSite=!1;a.brandsExpanded=!0;a.categoriesExpanded=!0;a.attributesExpanded=!1;a.categoriesInitialized=!1;a.expandedAttributes=[];a.init=function(b){a.enforcedBrand=b.enforcedBrand;a.isBrandSite=
!!a.enforcedBrand};a.getAvailableFilters=g(function(){a.$emit("PartListSearchStart",{});angular.isDefined(a.params["wildcard-part_number"]||a.params["wildcardspecial-part_number"]||a.params.part_number)?z([!0,!1]):z([!0]);m.availableFilters(a.searchMessage).then(function(b){a.availableFilters=b;w(a.searchMessage.filters,a.availableFilters);a.$emit("PartListSearchComplete",{})})},50);var q=a.$watch("availableFilters",function(a,b){c.$broadcast("AvailableFiltersUpdate",a)});a.$on("$destroy",function(){q()});
a.setSearchMessage=g(function(c){c||(c=new SearchMessage);c.filters||(c.filters=[]);a.searchMessage=c;var d=h.parseHashParameters();if(a.isBrandSite){var e=d.sub_brand_id;d.brand_id&&e&&delete d.brand_id}a.params=d;d=c;a.params.fitment_id?(d.filters.push({fitmentTerms:{fitment_id:[a.params.fitment_id]}}),f.searchMessage.includeCriteria.push("fitments"),a.attribute_core="fitments"):a.params.engine_id?(d.filters.push({engineTerms:{engine_id:[a.params.engine_id]}}),f.searchMessage.includeCriteria.push("engines"),
a.attribute_core="engines"):a.params.axle_id?(d.filters.push({axleTerms:{axle_id:[a.params.axle_id]}}),f.searchMessage.includeCriteria.push("axles"),a.attribute_core="axles"):b.debug("FYI no fitment engine or axle exists");f.searchMessage.sort="-active,brand_sort,part_display_order,category_id,subcategory_id,name";a:{c=c.filters;for(d=0;d<c.length;d++)if(e=c[d],e.hasOwnProperty("partTerms")){a.partTermsFilter=e;break a}d={partTerms:{}};(e=a.params["wildcard-part_number"]||a.params["wildcardspecial-part_number"]||
a.params.part_number)&&(d.partTerms["wildcardspecial-part_number"]=[e]);a.partTermsFilter=d.partTerms;c.push(d);for(var k in a.params)if("category_id"===k||"brand_id"===k||"subcategory_id"===k||"sub_brand_id"===k)t(k);else if(0===k.indexOf("attr")){d=a.params[k].split("||");e=k.substr(4);var g=a.params.fitment_id||a.params.engine_id||a.params.axle_id;g||(g=null);c.push({criteriaAttributeType:e,criteriaAttributeValue:d,core:a.attribute_core,applicationId:g});b.debug("Checked attr keys:");b.debug(c)}}a.$parent.noSearchCriteria||
a.getAvailableFilters()},500);a.toggleExpanded=function(b,c){!c&&a.isExpanded(b)?a.expandedAttributes.splice(a.expandedAttributes.indexOf(b.id),1):a.expandedAttributes.push(b.id)};a.isExpanded=function(b){return b&&b.id&&-1<a.expandedAttributes.indexOf(b.id)};a.showBrands=function(b){var c=a.filters.brands,d=!1;return b?(c.forEach(function(a){a.id===b&&a.children.length&&(d=!0)}),d):c&&0<c.length};a.showCategories=function(){var b=a.filters.categories;return b&&0<b.length};a.updateCategoryFilter=
function(a){var b=!1;a.selected||angular.forEach(a.children,function(a){a.selected&&(a.selected=!1,b=!0,n(a.selected,a.id,"subcategory_id"))});b||n(a.selected,a.id,"category_id")};a.updateBrandFilter=function(a){var b=!1;a.selected||angular.forEach(a.children,function(a){a.selected&&(a.selected=!1,b=!0,n(a.selected,a.id,"sub_brand_id"))});b||n(a.selected,a.id,"brand_id")};var p=function(a){var b=!1;angular.forEach(a,function(a){a.selected&&(b=!0)});return b};a.updateSubBrandFilter=function(a,b){a.selected||
p(b.children)?n(!1,b.id,"brand_id"):n(!0,b.id,"brand_id");n(a.selected,a.id,"sub_brand_id")};a.updateSubCategoryFilter=function(a,b){a.selected||p(b.children)?n(!1,b.id,"category_id"):n(!0,b.id,"category_id");n(a.selected,a.id,"subcategory_id")};a.updateAttributeFilter=function(a){n(a.selected,a.name,"attr"+a.id)};var n=function(b,c,d){var e=a.params[d];if(b)e&&void 0!==e||(e=""),a.params[d]=e?e+"||"+c:c,window.location.hash=h.buildQueryString(a.params);else if(e){b=e.split("||");e=b.indexOf(c+"");
b.splice(e,1);e="";for(var f=0;f<b.length;f++)e=0===f?e+b[f]:e+("||"+b[f]);""===e?(delete a.params[d],"subcategory_id"===d&&r("attr")):a.params[d]=e;"category_id"===d?x(a.filters.categories,c,"subcategory_id"):"brand_id"===d&&x(a.filters.brands,c,"sub_brand_id");"undefined"===typeof a.params.subcategory_id&&r("attr");window.location.hash=h.buildQueryString(a.params)}},r=function(b){for(var c in a.params)0===c.indexOf(b)&&delete a.params[c]},x=function(b,c,d){var e=[];angular.forEach(b,function(a){a.id+
""===c+""&&angular.forEach(a.children,function(a){a.selected&&e.push(a.id)})});if(b=a.params[d]){var f=[];angular.forEach(b.split("||"),function(a){0>e.indexOf(a)&&f.push(a)});f&&0<f.length?a.params[d]=f.join("||"):delete a.params[d]}},w=function(c,g){b.debug("Filters",c);b.debug("Available filters",g);var h={categories:[],brands:[],attributes:[]};y(g.categories,h.categories);y(g.brands,h.brands);A(g.attributes,h.attributes);for(var l=0;l<c.length;l++){var m=c[l];if(m){if(m.hasOwnProperty("partTerms")){var n=
m.partTerms;n.hasOwnProperty("brand_id")&&u(h.brands,n.brand_id);n.hasOwnProperty("category_id")&&u(h.categories,n.category_id);n.hasOwnProperty("sub_brand_id")&&B(h.brands,n.sub_brand_id);n.hasOwnProperty("subcategory_id")&&B(h.categories,n.subcategory_id);if(n.hasOwnProperty("category_and_sub_category_id")){var q=[],p=[];angular.forEach(n.category_and_sub_category_id,function(a){0<a.indexOf(":category_id")?q.push(a.split(":")[0]):0<a.indexOf(":sub_category_id")&&p.push(a.split(":")[0])});u(h.categories,
q);B(h.categories,p)}if(n.hasOwnProperty("brand_and_sub_brand_id")){var r=[],v=[];angular.forEach(n.brand_and_sub_brand_id,function(a){0<a.indexOf(":brand_id")?r.push(a.split(":")[0]):0<a.indexOf(":sub_brand_id")&&v.push(a.split(":")[0])});u(h.brands,r);B(h.brands,v)}}if(m.hasOwnProperty("criteriaAttributeType"))if(angular.equals({},g.attributes))b.debug("Filters exist for attributes but no attributes are available. Removing"),c.splice(l,1);else{n=m.criteriaAttributeType;m=m.criteriaAttributeValue;
for(var C=h.attributes,t=0;t<C.length;t++)if(n+""===C[t].id+"")for(var x=C[t].children,w=0;w<x.length;w++)for(var z=0;z<m.length;z++)m[z].toLowerCase()===x[w].name.toLowerCase()&&(x[w].selected=!0,a.toggleExpanded(C[t],!0))}}}a.filters=h;f.searchMessage.filters=a.searchMessage.filters;c=[f.search()];angular.isDefined(a.params["wildcard-part_number"]||a.params["wildcardspecial-part_number"]||a.params.part_number)&&(d.searchMessage.filters=[{interchangeTerms:{"wildcardspecial-referenced_part_number":[a.params["wildcard-part_number"]||
a.params["wildcardspecial-part_number"]||a.params.part_number]}}],c.push(d.search()));a.$emit("PartListSearchStart",{});k.all(c).then(function(b){f.done=!0;d.done=!0;d.show||(d.show=0==f.searchMessage.data.length&&0<d.searchMessage.data.length);!a.categoriesInitialized&&a.filters.categories&&1===a.filters.categories.length&&(a.filters.categories[0].selected=!0,a.updateCategoryFilter(a.filters.categories[0]),a.categoriesInitialized=!0);a.$emit("PartListSearchComplete",{})});a.params.fitment_id&&(b.debug("Adding",
a.params.fitment_id,"to history"),e.addFitment(a.params.fitment_id))},y=function(a,b){a&&angular.forEach(a,function(a){if(a.values){var c=[],d;for(d in a.values)c.push({id:d,name:a.values[d].name,count:a.values[d].count,selected:!1})}b.push({id:a.id,name:a.name,count:a.count,selected:!1,children:c})})},A=function(a,b){if(a)for(var c=0;c<a.length;c++){var d=a[c];if(d.values){var e=[];angular.forEach(d.values,function(a,b){e.push({id:d.id,name:b,count:a,selected:!1})})}b.push({id:d.id,name:d.name,selected:!1,
children:e})}},u=function(a,b){var c=!1;if(a&&b)for(var d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++){var k=b[f];e.id&&e.id+""===k+""&&(c=e.selected=!0)}return c},B=function(a,b){var c=!1;if(a&&b)for(var d=0;d<a.length;d++){var e=a[d];if(e.children&&0<e.children.length)for(var f=0;f<e.children.length;f++)for(var k=e.children[f],g=0;g<b.length;g++){var h=b[g];k.id&&k.id+""===h+""&&(e.selected=!0,c=k.selected=!0)}}return c},t=function(b){angular.forEach(a.params[b].split("||"),function(c){var d=
c,e=b+"";"category_id"===e?(e="category_and_sub_category_id",d=c+":category_id"):"brand_id"===e?(e="brand_and_sub_brand_id",d=c+":brand_id"):"subcategory_id"===e?(e="category_and_sub_category_id",d=c+":sub_category_id"):"sub_brand_id"===e&&(e="brand_and_sub_brand_id",d=c+":sub_brand_id");c=e;a.partTermsFilter.hasOwnProperty(c)||(a.partTermsFilter[c]=[]);a.partTermsFilter[c].push(d)})},z=function(b){for(var c=!1,d=0;d<a.searchMessage.filters.length;d++)a.searchMessage.filters[d].hasOwnProperty("partTerms")&&
(a.searchMessage.filters[d].partTerms.active=b,c=!0);c||a.searchMessage.filters.push({partTerms:{active:b}})};a.setSearchMessage();l.onHashChange(function(b,c){a.setSearchMessage()},a)}])})();(function(){window.fmmp=window.fmmp||{};window.fmmp.schematicdiagram=angular.module("fmmp.schematic-diagram",["fmmp.partfinderresults"])})();
(function(){var a=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"==b?c:c&3|8).toString(16)})};window.fmmp.schematicdiagram.directive("schematicDiagram",["$timeout","$log",function(c,b){return{restrict:"E",scope:{diagram:"\x3d"},link:function(b,h,m){var f=a();h.append('\x3cdiv id\x3d"'+f+'"\x3e\x3c/div\x3e');var d=function(){c(function(){(new s7viewers.BasicZoomViewer({containerId:f,
params:{serverurl:"/is/image/",contenturl:"/",config:"/etc/dam/presets/viewer/Zoom_light",stagesize:"",asset:b.diagram.url}})).init()},0)};h=function(){return $("#"+f).is(":visible")};var e;h()?d():e=b.$watch(h,function(a){a&&(d(),e())})}}}])})();
(function(){window.fmmp.schematicdiagram.factory("SchematicsSearchService",["$log","$http","$q","PartService","FitmentService",function(a,c,b,g,h){g={};var m=function(c){var d=b.defer();c=new SearchMessage({filters:[{fitmentTerms:{fitment_id:[c+""]}}]});h.getFacets("tecdoc_model_id",c).then(function(b){a.debug("tecdoc id facets",b);b&&0<b.length?d.resolve(b[0]):d.reject()});return d.promise};g.findSchematics=function(f,d,e,h,k){var g=b.defer();e&&h?"2"!==e+""?(a.info("We are not in the chassis category, which is categoryId 2, so no schematic diagrams being loaded"),
g.resolve([])):m(h).then(function(b){c.get("/bin/fmmp/api/schematic-diagram.json/"+f+"/"+d+"/"+b+"/"+e+"/"+k.join()+"/data.json").then(function(a){a&&a.data&&a.data.data?g.resolve(a.data.data):g.reject("Invalid response from schematic search API")},function(b){a.error("Searching for schematic diagrams failed: ",b);g.reject(b)})},function(){a.error("There was a problem retrieving the kModNr");g.reject()}):(a.info("No fitmentId or categoryId found to search on"),g.resolve([]));return g.promise};return g}])})();
(function(){window.fmmp.schematicdiagram.controller("SchematicDiagramController",["$scope","$log","$http","$sce","SchematicsSearchService","util","urlHash","$timeout","$document",function(a,c,b,g,h,m,f,d,e){a.searching=!0;a.selectedDiagram="FRONT";a.expanded=!1;a.loadSchematics=function(){h.findSchematics(a.region,a.locale,a.schematicParams.category_id,a.schematicParams.fitment_id,a.schematicParams.brand_id).then(function(b){a.searching=!1;var e=[],f=[];angular.forEach(b,function(a){"FRONT"===a.orientation?
e.push(a):"REAR"===a.orientation?f.push(a):(a.orientation="FRONT",c.info("Diagram did not have an orientation, defaulting to front: ",a),e.push(a))});1<e.length&&angular.forEach(e,function(a,b){a.titleIndex=" "+(b+1)});1<f.length&&angular.forEach(f,function(a,b){a.titleIndex=" "+(b+1)});var g=[].concat(e.concat(f));angular.forEach(g,function(a,b){a.index=b});(a.diagrams=g)&&0<g.length&&d(function(){a.selectDiagram(g[0])},0)},function(b){a.searching=!1;a.diagrams=void 0;c.error(b)})};a.selectDiagram=
function(b){a.selectedDiagramIndex=b.index;b.initialize&&angular.isFunction(b.initialize)&&b.initialize()};a.isDiagramSelected=function(b){return a.selectedDiagramIndex===b.index};a.expandContainer=function(){a.expanded||a.$broadcast("schematicContainerExpanded")};a.schematicParams={};a.availableSearchFilters={};a.calcSchematicParams=function(){var b={},c=m.parseHashParameters();c.fitment_id&&(b.fitment_id=c.fitment_id);var d=[];c.category_id&&(d=c.category_id.split("||"));if(c.subcategory_id){var f=
c.subcategory_id.split("||");angular.forEach(f,function(b){var c=!1;angular.forEach(a.availableSearchFilters.categories||[],function(a){c||angular.forEach(a.values||[],function(d){c||b==d.id&&(c=a.id+"")})});d.push(c)})}0==d.length?a.availableSearchFilters.categories&&1==a.availableSearchFilters.categories.length&&(b.category_id=a.availableSearchFilters.categories[0].id+""):(d=m.createUniqueList(d),1==d.length&&d[0]&&(b.category_id=d[0]));f=e[0].body.getAttribute("data-enforcedbrand");if(c.brand_id||
f)b.brand_id=c.brand_id?m.createUniqueList(c.brand_id.split("||")):m.createUniqueList(f.split("||"));return b};a.updateSchematicDisplay=function(){var b=a.calcSchematicParams();angular.equals(a.schematicParams,b)||(a.schematicParams=b,a.schematicParams.category_id&&a.schematicParams.fitment_id?(a.showSchematics=!0,a.searching=!0,a.loadSchematics()):a.showSchematics=!1)};f.onHashChange(a.updateSchematicDisplay,a);a.$on("AvailableFiltersUpdate",function(b,c){a.availableSearchFilters=c;a.updateSchematicDisplay()});
a.initializeController=function(b,c){a.region=b;a.locale=c;a.updateSchematicDisplay()}}])})();window.fmmp=window.fmmp||{};fmmp.partFinderSuite=fmmp.partFinderSuite||{};fmmp.partFinderSuite.ng=angular.module("fmmp.partFinderSuite","fmmp.base fmmp.external.angular-debounce fmmp.partfinder fmmp.partfinderresults fmmp.partlist fmmp.schematic-diagram".split(" "));