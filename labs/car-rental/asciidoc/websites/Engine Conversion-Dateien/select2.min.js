(function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(h){for(var p=e([0]),q=-1,w=this.length;++q<w&&(p.context=p[0]=this[q])&&!1!==h.call(p[0],q,p););return this}})})(jQuery);
(function(e,h){function p(a,b){for(var c=0,d=b.length;c<d;c+=1)if(q(a,b[c]))return c;return-1}function q(a,b){return a===b?!0:a===h||b===h||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1}function w(a,b){var c;if(null===a||1>a.length)return[];a=a.split(b);b=0;for(c=a.length;b<c;b+=1)a[b]=e.trim(a[b]);return a}function D(a){return a.outerWidth(!1)-a.width()}function E(a){a.bind("keydown",function(){e.data(a,"keyup-change-value")===h&&e.data(a,"keyup-change-value",
a.val())});a.bind("keyup",function(){var b=e.data(a,"keyup-change-value");b!==h&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),a.trigger("keyup-change"))})}function P(a){a.bind("mousemove",function(a){var b=F;b!==h&&b.x===a.pageX&&b.y===a.pageY||e(a.target).trigger("mousemove-filtered",a)})}function G(a,b,c){c=c||h;var d;return function(){var e=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,e)},a)}}function Q(a){var b=!1,c;return function(){!1===b&&(c=a(),b=!0);return c}}
function R(a,b){var c=G(a,function(a){b.trigger("scroll-debounced",a)});b.bind("scroll",function(a){0<=p(a.target,b.get())&&c(a)})}function H(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),b.collapse(!1),b.select()))},0)}function k(a){a.preventDefault();a.stopPropagation()}function A(a,b,c){var d,g=[],l;(d=a.attr("class"))&&
e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(l=c(this))&&g.push(this)});a.attr("class",g.join(" "))}function I(a,b,c,d){var e=a.toUpperCase().indexOf(b.toUpperCase());b=b.length;0>e?c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("\x3cspan class\x3d'select2-match'\x3e"),c.push(d(a.substring(e,e+b))),c.push("\x3c/span\x3e"),c.push(d(a.substring(e+b,a.length))))}function J(a){var b,
c=0,d=null,g=a.quietMillis||100,l=a.url,m=this;return function(n){window.clearTimeout(b);b=window.setTimeout(function(){var b=c+=1,g=a.data,h=l,f=a.transport||e.ajax,k=a.type||"GET",q={};g=g?g.call(m,n.term,n.page,n.context):null;h="function"===typeof h?h.call(m,n.term,n.page,n.context):h;null!==d&&d.abort();a.params&&(e.isFunction(a.params)?e.extend(q,a.params.call(m)):e.extend(q,a.params));e.extend(q,{url:h,dataType:a.dataType,data:g,type:k,cache:!1,success:function(d){b<c||(d=a.results(d,n.page),
n.callback(d))}});d=f.call(m,q)},g)}}function K(a){var b=a,c=function(a){return""+a.text};if(e.isArray(b)){var d=b;b={results:d}}!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();if(a.text&&(c=a.text,!e.isFunction(c))){var g=b.text;c=function(a){return a[g]}}return function(a){var d=a.term,g={results:[]};if(""===d)a.callback(b());else{var l=function(b,g){var m;b=b[0];if(b.children){var h={};for(m in b)b.hasOwnProperty(m)&&(h[m]=b[m]);h.children=[];e(b.children).each2(function(a,b){l(b,h.children)});
(h.children.length||a.matcher(d,c(h),b))&&g.push(h)}else a.matcher(d,c(b),b)&&g.push(b)};e(b().results).each2(function(a,b){l(b,g.results)});a.callback(g)}}}function L(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=this.text!==h,b=a?this.text:this;(""===d||c.matcher(d,b))&&g.results.push(a?this:{id:this,text:this})});c.callback(g)}}function y(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error("formatterName must be a function or a falsy value");
}function u(a){return e.isFunction(a)?a():a}function M(a){var b=0;e.each(a,function(a,d){d.children?b+=M(d.children):b++});return b}function B(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c}if(window.Select2===h){var v,F;var f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?
a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var z=e(document);var C=function(){var a=1;return function(){return a++}}();z.bind("mousemove",function(a){F={x:a.pageX,y:a.pageY}});z=B(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;
this.opts=a=this.prepareOpts(a);this.id=a.id;a.element.data("select2")!==h&&null!==a.element.data("select2")&&this.destroy();this.enabled=!0;this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+C());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*~':"!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.body=Q(function(){return a.element.closest("body")});A(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.css(u(a.containerCss));this.container.addClass(u(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabIndex");this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){e(this).select2("focus")}).attr("tabIndex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(u(a.dropdownCssClass));this.dropdown.data("select2",this);this.results=b=this.container.find(".select2-results");
this.search=c=this.container.find("input.select2-input");c.attr("tabIndex",this.elementTabIndex);this.resultsPage=0;this.context=null;this.initContainer();P(this.results);this.dropdown.delegate(".select2-results","mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent));R(80,this.results);this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));e.fn.mousewheel&&b.mousewheel(function(a,c,e,m){c=b.scrollTop();0<m&&0>=c-m?(b.scrollTop(0),
k(a)):0>m&&b.get(0).scrollHeight-b.scrollTop()+m<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),k(a))});E(c);c.bind("keyup-change input paste",this.bind(this.updateResults));c.bind("focus",function(){c.addClass("select2-focused")});c.bind("blur",function(){c.removeClass("select2-focused")});this.dropdown.delegate(".select2-results","mouseup",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.bind("click mouseup mousedown",
function(a){a.stopPropagation()});e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());(a.element.is(":disabled")||a.element.is("[readonly\x3d'readonly']"))&&this.disable()},destroy:function(){var a=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);a!==h&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},
prepareOpts:function(a){var b;var c=a.element;"select"===c.get(0).tagName.toLowerCase()&&(this.select=b=a.element);b&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a \x3cselect\x3e element.");});a=e.extend({},{populateResults:function(b,c,d){var g=this.opts.id,l=this;var m=function(b,c,n){var f;b=a.sortResults(b,c,d);var r=0;for(f=b.length;r<f;r+=1){var t=b[r];
var x=!0===t.disabled;var k=!x&&g(t)!==h;var q=t.children&&0<t.children.length;var p=e("\x3cli\x3e\x3c/li\x3e");p.addClass("select2-results-dept-"+n);p.addClass("select2-result");p.addClass(k?"select2-result-selectable":"select2-result-unselectable");x&&p.addClass("select2-disabled");q&&p.addClass("select2-result-with-children");p.addClass(l.opts.formatResultCssClass(t));k=e(document.createElement("div"));k.addClass("select2-result-label");x=a.formatResult(t,k,d,l.opts.escapeMarkup);x!==h&&k.html(x);
p.append(k);q&&(q=e("\x3cul\x3e\x3c/ul\x3e"),q.addClass("select2-result-sub"),m(t.children,q,n+1),p.append(q));p.data("select2-data",t);c.append(p)}};m(c,b,0)}},e.fn.select2.defaults,a);if("function"!==typeof a.id){var d=a.id;a.id=function(a){return a[d]}}if(e.isArray(a.element.data("select2Tags"))){if("tags"in a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}b?(a.query=this.bind(function(a){var b=
{results:[],more:!1},d=a.term;var g=function(b,c){if(b.is("option"))a.matcher(d,b.text(),b)&&c.push({id:b.attr("value"),text:b.text(),element:b.get(),css:b.attr("class"),disabled:q(b.attr("disabled"),"disabled")});else if(b.is("optgroup")){var e={text:b.attr("label"),children:[],element:b.get(),css:b.attr("class")};b.children().each2(function(a,b){g(b,e.children)});0<e.children.length&&c.push(e)}};var f=c.children();if(this.getPlaceholder()!==h&&0<f.length){var r=f[0];""===e(r).text()&&(f=f.not(r))}f.each2(function(a,
c){g(c,b.results)});a.callback(b)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css}):"query"in a||("ajax"in a?((b=a.element.data("ajax-url"))&&0<b.length&&(a.ajax.url=b),a.query=J.call(a.element,a.ajax)):"data"in a?a.query=K(a.data):"tags"in a&&(a.query=L(a.tags),a.createSearchChoice===h&&(a.createSearchChoice=function(a){return{id:a,text:a}}),a.initSelection===h&&(a.initSelection=function(b,c){var d=[];e(w(b.val(),a.separator)).each(function(){var b=this,c=this,g=a.tags;
e.isFunction(g)&&(g=g());e(g).each(function(){if(q(this.id,b))return c=this.text,!1});d.push({id:b,text:c})});c(d)})));if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element;a.bind("change.select2",this.bind(function(a){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}));var b=this.bind(function(){var a="disabled"!==this.opts.element.attr("disabled");var b="readonly"===
this.opts.element.attr("readonly");a=a&&!b;this.enabled!==a&&(a?this.enable():this.disable());A(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(u(this.opts.containerCssClass));A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(u(this.opts.dropdownCssClass))});a.bind("propertychange.select2 DOMAttrModified.select2",b);"undefined"!==typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=
null),this.propertyObserver=new WebKitMutationObserver(function(a){a.forEach(b)}),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),
this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.container.offset(),b=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=this.dropdown.outerHeight(!1),g=e(window).scrollLeft()+e(window).width(),l=e(window).scrollTop()+
e(window).height();b=a.top+b;var m=a.left;l=b+d<=l;var h=a.top-d>=this.body().scrollTop(),f=this.dropdown.outerWidth(!1);g=m+f<=g;var r=this.dropdown.hasClass("select2-drop-above");if("static"!==this.body().css("position")){var k=this.body().offset();b-=k.top;m-=k.left}r?(r=!0,!h&&l&&(r=!1)):(r=!1,!l&&h&&(r=!0));g||(m=a.left+c-f);r?(b=a.top-d,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above"));
a=e.extend({top:b,left:m,width:c},u(this.opts.dropdownCss));this.dropdown.css(a)},shouldOpen:function(){if(this.opened())return!1;var a=e.Event("opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;window.setTimeout(this.bind(this.opening),1);return!0},opening:function(){function a(){return{width:Math.max(document.documentElement.scrollWidth,
e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var b=this.containerId,c="scroll."+b,d="resize."+b,g="orientationchange."+b;this.clearDropdownAlignmentPreference();this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());this.updateResults(!0);b=e("#select2-drop-mask");0==b.length&&(b=e(document.createElement("div")),b.attr("id",
"select2-drop-mask").attr("class","select2-drop-mask"),b.hide(),b.appendTo(this.body()),b.bind("mousedown touchstart",function(a){a=e("#select2-drop");0<a.length&&(a=a.data("select2"),a.opts.selectOnBlur&&a.selectHighlighted({noFocus:!0}),a.close())}));this.dropdown.prev()[0]!==b[0]&&this.dropdown.before(b);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");b.css(a());b.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();
var l=this;this.container.parents().add(window).each(function(){e(this).bind(d+" "+c+" "+g,function(b){e("#select2-drop-mask").css(a());l.positionDropdown()})});this.focusSearch()},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).unbind(b).unbind(c).unbind(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();
this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return u(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results;var b=this.highlight();if(!(0>b))if(0==b)a.scrollTop(0);else{var c=this.findHighlightableChoices();var d=e(c[b]);var g=d.offset().top+d.outerHeight(!0);b===c.length-1&&
(c=a.find("li.select2-more-results"),0<c.length&&(g=c.offset().top+c.outerHeight(!0)));c=a.offset().top+a.outerHeight(!0);g>c&&a.scrollTop(a.scrollTop()+(g-c));g=d.offset().top-a.offset().top;0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)}},findHighlightableChoices:function(){this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)");return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(a){for(var b=
this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){c+=a;var d=e(b[c]);if(d.hasClass("select2-result-selectable")&&!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return p(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.results.find(".select2-highlighted").removeClass("select2-highlighted");b=e(b[a]);b.addClass("select2-highlighted");
this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"highlight",val:this.id(b),choice:b})},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c=this.resultsPage+1,d=this,e=this.search.val(),l=this.context;0!==b.length&&b.offset().top-a.offset().top-a.height()<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:e,page:c,context:l,matcher:this.opts.matcher,callback:this.bind(function(g){d.opened()&&(d.opts.populateResults.call(this,a,g.results,{term:e,page:c,context:l}),d.postprocessResults(g,!1,!1),!0===
g.more?(b.detach().appendTo(a).text(d.opts.formatLoadMore(c+1)),window.setTimeout(function(){d.loadMoreIfNeeded()},10)):b.remove(),d.positionDropdown(),d.resultsPage=c,d.context=g.context)})}))},tokenize:function(){},updateResults:function(a){function b(){g.scrollTop(0);d.removeClass("select2-active");f.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,l=this.opts,f=this;var n=d.val();var k=e.data(this.container,"select2-last-term");if(!0===a||!k||!q(n,k))if(e.data(this.container,
"select2-last-term",n),!0===a||!1!==this.showSearchInput&&this.opened()){k=this.getMaximumSelectionSize();if(1<=k&&(n=this.data(),e.isArray(n)&&n.length>=k&&y(l.formatSelectionTooBig,"formatSelectionTooBig"))){c("\x3cli class\x3d'select2-selection-limit'\x3e"+l.formatSelectionTooBig(k)+"\x3c/li\x3e");return}d.val().length<l.minimumInputLength?y(l.formatInputTooShort,"formatInputTooShort")?c("\x3cli class\x3d'select2-no-results'\x3e"+l.formatInputTooShort(d.val(),l.minimumInputLength)+"\x3c/li\x3e"):
c(""):l.maximumInputLength&&d.val().length>l.maximumInputLength?y(l.formatInputTooLong,"formatInputTooLong")?c("\x3cli class\x3d'select2-no-results'\x3e"+l.formatInputTooLong(d.val(),l.maximumInputLength)+"\x3c/li\x3e"):c(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&c("\x3cli class\x3d'select2-searching'\x3e"+l.formatSearching()+"\x3c/li\x3e"),d.addClass("select2-active"),n=this.tokenize(),n!=h&&null!=n&&d.val(n),this.resultsPage=1,l.query({element:l.element,term:d.val(),page:this.resultsPage,
context:null,matcher:l.matcher,callback:this.bind(function(k){if(this.opened()){this.context=k.context===h?null:k.context;if(this.opts.createSearchChoice&&""!==d.val()){var m=this.opts.createSearchChoice.call(null,d.val(),k.results);m!==h&&null!==m&&f.id(m)!==h&&null!==f.id(m)&&0===e(k.results).filter(function(){return q(f.id(this),f.id(m))}).length&&k.results.unshift(m)}0===k.results.length&&y(l.formatNoMatches,"formatNoMatches")?c("\x3cli class\x3d'select2-no-results'\x3e"+l.formatNoMatches(d.val())+
"\x3c/li\x3e"):(g.empty(),f.opts.populateResults.call(this,g,k.results,{term:d.val(),page:this.resultsPage,context:null}),!0===k.more&&y(l.formatLoadMore,"formatLoadMore")&&(g.append("\x3cli class\x3d'select2-more-results'\x3e"+f.opts.escapeMarkup(l.formatLoadMore(this.resultsPage))+"\x3c/li\x3e"),window.setTimeout(function(){f.loadMoreIfNeeded()},10)),this.postprocessResults(k,a),b(),this.opts.element.trigger({type:"loaded",data:k}))}else this.search.removeClass("select2-active")})}))}},cancel:function(){this.close()},
blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){H(this.search)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");
c&&(this.highlight(b),this.onSelect(c,a))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var a=function(){var a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){var c=this.opts.element.attr("style");
if(c!==h){c=c.split(";");var d=0;for(a=c.length;d<a;d+=1){var g=c[d].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(null!==g&&1<=g.length)return g[1]}}return"resolve"===this.opts.width?(c=this.opts.element.css("width"),0<c.indexOf("%")?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==a&&this.container.css("width",a)}});var N=
B(z,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("\x3ca href\x3d'javascript:void(0)' onclick\x3d'return false;' class\x3d'select2-choice' tabindex\x3d'-1'\x3e   \x3cspan\x3e\x3c/span\x3e\x3cabbr class\x3d'select2-search-choice-close' style\x3d'display:none;'\x3e\x3c/abbr\x3e   \x3cdiv\x3e\x3cb\x3e\x3c/b\x3e\x3c/div\x3e\x3c/a\x3e\x3cinput class\x3d'select2-focusser select2-offscreen' type\x3d'text'/\x3e\x3cdiv class\x3d'select2-drop' style\x3d'display:none'\x3e   \x3cdiv class\x3d'select2-search'\x3e       \x3cinput type\x3d'text' autocomplete\x3d'off' class\x3d'select2-input'/\x3e   \x3c/div\x3e   \x3cul class\x3d'select2-results'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments);this.focusser.attr("disabled","disabled");this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),H(this.focusser))},
focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var a,b=this.container,c=this.dropdown;this.showSearch(0<=this.opts.minimumResultsForSearch);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");
this.focusser.attr("id","s2id_autogen"+C());e("label[for\x3d'"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.search.bind("keydown",this.bind(function(a){if(this.enabled)if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)k(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);k(a);break;case f.TAB:case f.ENTER:this.selectHighlighted();k(a);break;case f.ESC:this.cancel(a),k(a)}}));this.search.bind("blur",this.bind(function(a){document.activeElement===
this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.bind("keydown",this.bind(function(a){if(this.enabled&&a.which!==f.TAB&&!f.isControl(a)&&!f.isFunctionKey(a)&&a.which!==f.ESC)if(!1===this.opts.openOnEnter&&a.which===f.ENTER)k(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)this.open(),k(a);else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),k(a)}));E(this.focusser);this.focusser.bind("keyup-change input",
this.bind(function(a){this.opened()||(this.open(),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.focusser.val(""),k(a))}));a.delegate("abbr","mousedown",this.bind(function(a){this.enabled&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.bind("mousedown",this.bind(function(a){this.opened()?this.close():this.enabled&&this.open();k(a)}));c.bind("mousedown",this.bind(function(){this.search.focus()}));a.bind("focus",this.bind(function(a){k(a)}));
this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")}));this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}));this.initContainerWidth();this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");b&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),
this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==h&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments);"select"===a.element.get(0).tagName.toLowerCase()?
a.initSelection=function(a,c){a=a.find(":selected");e.isFunction(c)&&c({id:a.attr("value"),text:a.text(),element:a})}:"data"in a&&(a.initSelection=a.initSelection||function(b,c){var d=b.val(),g=null;a.query({matcher:function(b,c,e){(b=q(d,a.id(e)))&&(g=e);return b},callback:e.isFunction(c)?function(){c(g)}:e.noop})});return a},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?h:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=
this.getPlaceholder();""!==this.opts.element.val()||a===h||this.select&&""!==this.select.find("option:first").text()||(this.selection.find("span").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide())},postprocessResults:function(a,b,c){var d=0,e=this,l=!0;this.findHighlightableChoices().each2(function(a,b){if(q(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&this.highlight(d);!0===b&&(b=this.opts.minimumResultsForSearch,
l=0>b?!1:M(a.results)>=b,this.showSearch(l))},showSearch:function(a){this.showSearchInput=a;this.dropdown.find(".select2-search")[a?"removeClass":"addClass"]("select2-search-hidden");e(this.dropdown,this.container)[a?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(a,b){var c=this.opts.element.val();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"selected",val:this.id(a),choice:a});this.close();b&&b.noFocus||this.selection.focus();q(c,
this.id(a))||this.triggerChange()},updateSelection:function(a){var b=this.selection.find("span");this.selection.data("select2-data",a);b.empty();a=this.opts.formatSelection(a,b);a!==h&&b.append(this.opts.escapeMarkup(a));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==h&&this.selection.find("abbr").show()},val:function(){var a=!1,b=null,c=this;if(0===arguments.length)return this.opts.element.val();var d=arguments[0];1<arguments.length&&(a=arguments[1]);
if(this.select)this.select.val(d).find(":selected").each2(function(a,c){b={id:c.attr("value"),text:c.text(),element:c.get(0)};return!1}),this.updateSelection(b),this.setPlaceholder(),a&&this.triggerChange();else{if(this.opts.initSelection===h)throw Error("cannot call val() if initSelection() is not defined");d||0===d?(this.opts.element.val(d),this.opts.initSelection(this.opts.element,function(b){c.opts.element.val(b?c.id(b):"");c.updateSelection(b);c.setPlaceholder();a&&c.triggerChange()})):(this.clear(a),
a&&this.triggerChange())}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){if(0===arguments.length){var b=this.selection.data("select2-data");b==h&&(b=null);return b}a&&""!==a?(this.opts.element.val(a?this.id(a):""),this.updateSelection(a)):this.clear()}});var O=B(z,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("    \x3cul class\x3d'select2-choices'\x3e  \x3cli class\x3d'select2-search-field'\x3e    \x3cinput type\x3d'text' autocomplete\x3d'off' class\x3d'select2-input'\x3e  \x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'select2-drop select2-drop-multi' style\x3d'display:none;'\x3e   \x3cul class\x3d'select2-results'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments);"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,c){var b=[];a.find(":selected").each2(function(a,c){b.push({id:c.attr("value"),text:c.text(),element:c[0]})});c(b)}:"data"in a&&(a.initSelection=a.initSelection||function(b,c){var d=w(b.val(),a.separator),g=[];a.query({matcher:function(b,c,f){(b=e.grep(d,function(b){return q(b,a.id(f))}).length)&&g.push(f);return b},callback:e.isFunction(c)?function(){c(g)}:
e.noop})});return a},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");this.search.attr("id","s2id_autogen"+C());e("label[for\x3d'"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id"));this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())}));this.search.bind("keydown",this.bind(function(b){if(this.enabled){if(b.which===f.BACKSPACE&&""===
this.search.val()){this.close();var c=a.find(".select2-search-choice-focus");if(0<c.length){this.unselect(c.first());this.search.width(10);k(b);return}c=a.find(".select2-search-choice:not(.select2-locked)");0<c.length&&c.last().addClass("select2-search-choice-focus")}else a.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);k(b);return;case f.ENTER:case f.TAB:this.selectHighlighted();
k(b);return;case f.ESC:this.cancel(b);k(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),b.which!==f.PAGE_UP&&b.which!==f.PAGE_DOWN||k(b),b.which===f.ENTER&&k(b))}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(a){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");
this.opened()||this.clearSearch();a.stopImmediatePropagation()}));this.container.delegate(".select2-choices","mousedown",this.bind(function(a){!this.enabled||0<e(a.target).closest(".select2-search-choice").length||(this.clearPlaceholder(),this.open(),this.focusSearch(),a.preventDefault())}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));
this.initContainerWidth();this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,
this.opts.element,function(b){b!==h&&null!==b&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder();a!==h&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(this.getMaxSearchWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();
this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>p(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();
e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&a!=h&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.addSelectedChoice(a);this.opts.element.trigger({type:"selected",val:this.id(a),choice:a});!this.select&&this.opts.closeOnSelect||this.postprocessResults();this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?
(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10));this.triggerChange({added:a});b&&b.noFocus||this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("\x3cli class\x3d'select2-search-choice'\x3e    \x3cdiv\x3e\x3c/div\x3e    \x3ca href\x3d'#' onclick\x3d'return false;' class\x3d'select2-search-choice-close' tabindex\x3d'-1'\x3e\x3c/a\x3e\x3c/li\x3e"),
d=e("\x3cli class\x3d'select2-search-choice select2-locked'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/li\x3e");c=b?c:d;d=this.id(a);var g=this.getVal();var f=this.opts.formatSelection(a,c.find("div"));f!=h&&c.find("div").replaceWith("\x3cdiv\x3e"+this.opts.escapeMarkup(f)+"\x3c/div\x3e");b&&c.find(".select2-search-choice-close").bind("mousedown",k).bind("click dblclick",this.bind(function(a){this.enabled&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));
this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue(),k(a))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);g.push(d);this.setVal(g)},unselect:function(a){var b=this.getVal(),c;a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+
a+". Must be .select2-search-choice";if(c=a.data("select2-data")){var d=p(this.id(c),b);0<=d&&(b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults());a.remove();this.opts.element.trigger({type:"removed",val:this.id(c),choice:c});this.triggerChange({removed:c})}},postprocessResults:function(){var a=this.getVal(),b=this.results.find(".select2-result"),c=this.results.find(".select2-result-with-children"),d=this;b.each2(function(b,c){b=d.id(c.data("select2-data"));0<=p(b,a)&&(c.addClass("select2-selected"),
c.find(".select2-result-selectable").addClass("select2-selected"))});c.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")});-1==this.highlight()&&d.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-D(this.search)},resizeSearch:function(){var a=D(this.search);var b=this.search;if(!v){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);v=e(document.createElement("div")).css({position:"absolute",
left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"});v.attr("class","select2-sizer");e("body").append(v)}v.text(b.val());b=v.width()+10;var d=this.search.offset().left;c=this.selection.width();var g=this.selection.offset().left;d=c-(d-g)-a;d<b&&(d=c-a);40>d&&(d=c-a);0>=d&&(d=b);this.search.width(d)},getVal:function(){if(this.select){var a=
this.select.val();return null===a?[]:a}a=this.opts.element.val();return w(a,this.opts.separator)},setVal:function(a){if(this.select)this.select.val(a);else{var b=[];e(a).each(function(){0>p(this,b)&&b.push(this)});this.opts.element.val(0===b.length?"":b.join(this.opts.separator))}},val:function(){var a=!1,b=this;if(0===arguments.length)return this.getVal();var c=arguments[0];1<arguments.length&&(a=arguments[1]);if(c||0===c){this.setVal(c);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),
a&&this.triggerChange();else{if(this.opts.initSelection===h)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(c){var d=e(c).map(b.id);b.setVal(d);b.updateSelection(c);b.clearSearch();a&&b.triggerChange()})}this.clearSearch()}else this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),a&&this.triggerChange()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to \x3cselect\x3e. Attach to \x3cinput type\x3d'hidden'/\x3e instead.");
this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a){var b=this;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();
a||(a=[]);var c=e.map(a,function(a){return b.opts.id(a)});this.setVal(c);this.updateSelection(a);this.clearSearch()}});e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,g,f="val destroy opened open close focus isFocused container onSortStart onSortEnd enable disable positionDropdown data".split(" ");this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?g=b.element.attr("multiple"):
(g=b.multiple||!1,"tags"in b&&(b.multiple=g=!0)),c=g?new O:new N,c.init(b);else if("string"===typeof a[0]){if(0>p(a[0],f))throw"Unknown method: "+a[0];d=h;c=e(this).data("select2");if(c!==h&&(d="container"===a[0]?c.container:c[a[0]].apply(c,a.slice(1)),d!==h))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return d===h?this:d};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",
formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b){return a?a.text:h},sortResults:function(a,b,c){return a},formatResultCssClass:function(a){return h},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){a=b-a.length;return"Please enter "+a+" more character"+(1==a?"":"s")},formatInputTooLong:function(a,b){a=a.length-b;return"Please delete "+a+" character"+(1==a?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+
a+" item"+(1==a?"":"s")},formatLoadMore:function(a){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=(""+b).toUpperCase().indexOf((""+a).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(a,b,c,d){var e=a,f;if(!d.createSearchChoice||!d.tokenSeparators||1>d.tokenSeparators.length)return h;for(;;){var k=
-1;var n=0;for(f=d.tokenSeparators.length;n<f;n++){var p=d.tokenSeparators[n];k=a.indexOf(p);if(0<=k)break}if(0>k)break;var r=a.substring(0,k);a=a.substring(k+p.length);if(0<r.length&&(r=d.createSearchChoice(r,b),r!==h&&null!==r&&d.id(r)!==h&&null!==d.id(r))){k=!1;n=0;for(f=b.length;n<f;n++)if(q(d.id(r),d.id(b[n]))){k=!0;break}k||c(r)}}if(e!==a)return a},escapeMarkup:function(a){var b={"\\":"\x26#92;","\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26apos;","/":"\x26#47;"};
return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(a){return null}};window.Select2={query:{ajax:J,local:K,tags:L},util:{debounce:G,markMatch:I},"class":{"abstract":z,single:N,multi:O}}}})(jQuery);